---
layout: post
title: インターネット通信概説
date: 2014-12-03
description: この記事はFrontrend Advent Calendar 2014 3日目の記事です。
---

# インターネット通信概説

通信ってなんだろう？HTTPとは一体何者なんだろう？と考えたことはあるだろうか。かく言う私もこのレイヤの話は詳しくない。Webのフロントエンジニアとして舵を切った2年と5ヶ月前は、この手の話に興味を持つとは思いもよらなかったが、周りの連中が変な人ばかりなので気付いたら勉強していた。前職でもプログラマとして働いていたものの、恥ずかしながら、全くと言って良い程疎かった。

HTTPだの、WebSocketだの、言葉は耳にするけど、普段関わらないせいで理解に乏しい人も多いと思う。私自身も密着しているかと言われれば疑問符が残るが、インターネットで何が起こっているかを理解すると思考の幅も広がると思う。今日はその手助けになるような記事を書き綴りたい。

## そもそもサーバーとは？

正直、サーバーって一体何だろうと思っている人も多いのではないだろうか？手元のパソコン、iPhone、Androidといったクライアントからの要求を待ち、応答する役割を担っているのがサーバーである。

### 電話におけるサーバー

このようにクライアントからの応答を待つ役割をするサーバーは、インターネットに限った話ではない。例えば電話でのやりとりにも、サーバーが存在する。

1. 電話のかけ手が番号を入力し発信する
2. サーバーが入力された番号を探す
3. 電話の受け手が受信する
4. サーバーを介して通話を開始する

![](/img/posts/what-is-internet/network1.gif)

このように、家の置き電話や携帯電話があるだけでは通話は成立せず、通話が確立するまでや、その後の通話（音声データのやりとり）もサーバーを介して行われている。

### WWWにおけるサーバー

ブラウザにURLを入力し、表示されたWebページを閲覧するということは誰しもが当たり前のようにやっていることかと思うが、実はここでもサーバーが一役買っている。

1. 入力されたURLのサーバーに対し、ブラウザが接続要求をする
2. サーバーが接続要求に対し、応答する（接続開始）
3. ブラウザがWebページリソースの要求をする
4. サーバーがWebページリソース（HTML）を送信する

![](/img/posts/what-is-internet/network2.gif)

少し厳密に言えば、URLに対してブラウザが接続要求を実行するタイミングでDNS解決というURL（ホスト名）からIPアドレスへの変換が行われる。インターネットにおける端末間の通信には、お互いの一意なデータとしてIPアドレスを認識している必要があるためだ。先程の電話の場合は、電話番号がその役割を果たしている。

## サーバーとクライアントのやりとり

Webページの表示するために、クライアントとサーバーがやりとりを行っていることがわかった。次にどのようなやりとりを行っているかを見てみよう。

やりとりの中にはルールが存在している。普段の生活で言えば、日本語のような決まった言語でやりとりをするであったり、面と向かって、または何かしらのツール上でメッセージの交換をする等、何かしら縛りがある。

クライアントがサーバーとやりとりを行う際もある一定のルールの中でやりとりが行われる。このコンピュータが行うやりとりにおけるルールをプロトコルと言う。以下、[Wikipediaより引用](http://ja.wikipedia.org/wiki/%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB)。

>プロトコルまたはプロトコール（英語 protocol 英語発音: [ˈproutəˌkɔːl] プロウタコール、[ˈproutəˌkɔl] プロウタコル、フランス語 protocole フランス語発音: [prɔtɔkɔl] プロトコル）とは、複数の者が対象となる事項を確実に実行するための手順等について定めたもの。日本語では「規定」「議定書」「儀典」などと意訳される。もともとは人間同士のやりとりに関する用語としてのみ用いられていたが、近年では派生的に、情報工学分野でマシンやソフトウェア同士のやりとりに関する概念を指すためにも用いられるようになった。

### インターネットにおけるプロトコル

プロトコルの中でも、特に通信に関するプロトコルは通信プロトコルと言う。昨今のインターネットにおいては、HTTP（Hypertext Transfer Protocol）が最も多くの割合を占めている。以下、[Wikipediaより引用](http://ja.wikipedia.org/wiki/Hypertext_Transfer_Protocol)。

>Hypertext Transfer Protocol（ハイパーテキスト・トランスファー・プロトコル、略称 HTTP）とは、WebブラウザとWebサーバの間でHTMLなどのコンテンツの送受信に用いられる通信プロトコルである。ハイパーテキスト転送プロトコルとも呼ばれる。

静的なWebサイト・動的なWebアプリケーションを問わず、この一定のルールの元でやりとりが行われ、ブラウザにデータが返却される。