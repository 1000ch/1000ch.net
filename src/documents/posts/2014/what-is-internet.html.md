---
layout: post
title: インターネット通信概説
date: 2014-12-03
description: この記事はFrontrend Advent Calendar 2014 3日目の記事です。
---

# インターネット通信概説

「通信ってなんだろう？」「HTTPって一体なんだろう？」と考えたことはあるだろうか。Webのフロントエンジニアとして舵を切った2年と5ヶ月前は、この手の話に興味を持つとは思いもよらなかったが、（周りが変な人ばかりなので）気付いたら勉強していた。前職でもプログラマとして働いていたものの、恥ずかしながら、全くと言って良い程疎かった。

HTTPだの、WebSocketだの、言葉は耳にするけど実態はよくわからない
…という人も多いと思う。私自身も深く密着しているわけではないし、語るほど詳しいかと言われれば疑問符が残る。それでも、今までモヤモヤしていたところを少しでも晴らす手助けが出来ればと思い、今日はインターネットの世界で何が起こっているかについての記事を書きたい。

## そもそもサーバーとは？

サーバーって一体何だろうと思っている人も多いのではないだろうか？手元のパソコン、iPhone、Androidといった **クライアントからの要求を待ち、応答する役割を担っているのがサーバー** である。応答するプログラムであれば端末の種別は問わないが、起動しっぱなしのパソコンと思ってもらえばわかりやすいかもしれない。

### 電話におけるサーバー

クライアントからの応答を待つ役割をするサーバーは、インターネットに限った話ではない。例えば電話でのやりとりに於いても、サーバーは存在する。

1. 電話のかけ手が、番号を入力し発信する
2. サーバーが入力された番号を探す
3. 電話の受け手が受信する
4. サーバーを介して通話を開始する

![](/img/posts/what-is-internet/network1.gif)

このように、家の置き電話や携帯電話があるだけでは通話は成立せず、通話が確立するまでや、その後の通話（音声データのやりとり）もサーバーを介して行われている。

### WWWにおけるサーバー

ブラウザにURLを入力し、表示されたWebページを閲覧するということは誰しもが当たり前のようにやっていることだが、実はここでもサーバーが一役買っている。

1. 入力されたURLのサーバーに対し、ブラウザが接続要求をする
2. サーバーが接続要求に対し、応答する（接続開始）
3. ブラウザがURLに関するリソースの要求をする
4. サーバーがリソース（HTML）を送信する

![](/img/posts/what-is-internet/network2.gif)

厳密に言えば、URLに対してブラウザが接続要求を実行するタイミングでDNS解決というURL（ホスト名）からIPアドレスへの変換が行われる。インターネットにおける端末間の通信には、お互いを一意に認識するデータとしてIPアドレスを知っている必要があるためだ。先程の電話の場合は、電話番号がその役割を果たしている。

## サーバーとクライアントのやりとり

Webページの表示するために、クライアントとサーバーがやりとりを行っていることがわかった。次にどのようなやりとりを行っているかを見てみよう。

やりとりの中にはルールが存在している。普段の生活で言えば、 **日本語のような決まった言語でやりとりをする** であったり、 **面と向かって、または何かしらのツール上でメッセージの交換をする** といったように、何かしら縛りがあるはずだ。

クライアントがサーバーとやりとりを行う際も、ある一定のルールの中でやりとりが行われる。このコンピュータが行うやりとりにおけるルールをプロトコルと言う。以下、[Wikipediaより引用](http://ja.wikipedia.org/wiki/%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB)。

>プロトコルまたはプロトコール（英語 protocol 英語発音: [ˈproutəˌkɔːl] プロウタコール、[ˈproutəˌkɔl] プロウタコル、フランス語 protocole フランス語発音: [prɔtɔkɔl] プロトコル）とは、複数の者が対象となる事項を確実に実行するための手順等について定めたもの。日本語では「規定」「議定書」「儀典」などと意訳される。もともとは人間同士のやりとりに関する用語としてのみ用いられていたが、近年では派生的に、情報工学分野でマシンやソフトウェア同士のやりとりに関する概念を指すためにも用いられるようになった。

## インターネットにおけるプロトコル

プロトコルの中でも、特に通信に関するプロトコルは通信プロトコルと言う。そして昨今のインターネットにおいては、HTTP（Hypertext Transfer Protocol）が最も多くの割合を占めている。以下、[Wikipediaより引用](http://ja.wikipedia.org/wiki/Hypertext_Transfer_Protocol)。

>Hypertext Transfer Protocol（ハイパーテキスト・トランスファー・プロトコル、略称 HTTP）とは、WebブラウザとWebサーバの間でHTMLなどのコンテンツの送受信に用いられる通信プロトコルである。ハイパーテキスト転送プロトコルとも呼ばれる。

静的なWebサイト・動的なWebアプリケーションを問わず、この一定のルールの元でやりとりが行われ、ブラウザにデータが返却される。つまり、 **サーバーとクライアントがHTTPというルール（プロトコル）のもとで、データのやりとりを行う** ということになる。

