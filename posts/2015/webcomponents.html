<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Web Componentsに対する問題提起 - EagleLand</title><link rel=icon href=/favicon.png><link rel="shortcut icon" href=/favicon.png><link rel="shortcut icon" href=/favicon.svg type=image/svg+xml sizes=any><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.2/build/styles/dracula.min.css><link rel=stylesheet href=/css/font.css><link rel=stylesheet href=/css/settings.css><link rel=stylesheet href=/css/tools.css><link rel=stylesheet href=/css/generic.css><link rel=stylesheet href=/css/base.css><link rel=stylesheet href=/css/objects.css><link rel=stylesheet href=/css/components.css><link rel=stylesheet href=/css/trumps.css><link rel=alternate href=/rss.xml title=1000ch.net type=application/rss+xml><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto+Mono"><meta name=author content="Shogo Sensui"><meta name=copyright content="Copyright (c) Shogo Sensui; Licensed under Creative Commons Attribution-Noncommercial-Share Japan"><meta property="og:description" content="Web Componentsに対する問題提起 Web Componentsについては暫く理想を語ってきたけど、正直そうは上手くいかないと思っている。
 Web Componentsが変えるWeb開発の未来 Web Componentsを構成する4つの仕様 ー Web Components基礎編 Web Componentsでカルーセルギャラリーを作る ー Web Components実践編 Web Componentsを簡単・便利にするライブラリ「Polymer」を使いこなそう 基本的な要素・機能を提供するCore ElementsとMaterial Designを実現するPaper Elements  Web Componentsを司る4つの仕様、Custom Elements・Template・Shadow DOM・HTML Importsは、確かにCSSの弱点を解決してくれる。
しかし、作られた・配布されているコンポーネントを使う側はともかく、Web Componentsの仕様を抑えてコンポーネントを構築していくのは、HTMLにCSSでスタイリングをしていく従来のやり方に比べて圧倒的に敷居が高いように感じる。CSSの言語としての簡易さと引き換えに顕在化してきた弱点にフォーカスされているからShadow DOMのありがたみがあるけど、Web Componentsによるコンポーネント作成が一般化するかどうかを想像するといささか疑問符が残る。
CSSの設計に悩まなくなるだけで、コンポーネント化する単位といったようなWeb Componentsを使っていく難しさに問題がシフトするだけなんじゃないかって。
Web Componentsの技術そのものへの敷居 CSSの問題を取り払いたいだけのはずなのに、Shadow DOMを使う敷居が高い（と、思う）。もっと言えばDeclarative（宣言的）からImperative（命令的）への思想の移行はプログラマでない人にとっては辛いところなんじゃないかと。
<template> <style> input {} button {} </style> <input type=&#34;text&#34;> <button>Button</button> </template> <script> var ownerDocument = document.currentScript.ownerDocument; var SampleElementPrototype = Object.create(HTMLElement.prototype); SampleElementPrototype.createdCallback = function () { var template = ownerDocument.querySelector('template'); var clone = document."><meta property="og:image" content="https://1000ch.net/img/apple-touch-icon.png"><meta name=twitter:card content="summary"><meta property="og:type" content="article"><meta property="og:url" content="https://1000ch.net/posts/2015/webcomponents.html"><meta property="og:site_name" content="EagleLand"><meta property="og:title" content="Web Componentsに対する問題提起"><meta name=twitter:site content="@1000ch"><meta name=twitter:url content="https://1000ch.net/posts/2015/webcomponents.html"><meta name=twitter:title content="Web Componentsに対する問題提起"><meta name=google-site-verification content="BWewniqiBzRmrhpj51eLwug-F4hamFfyznl-ARb-Y4Y"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed sizes=114x114 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed sizes=72x72 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49530352-1','1000ch.net');ga('send','pageview');</script></head><body><div class=Container><header class=Header><h1 class=Header__Title><a href=/>EagleLand</a></h1><nav class=Header__Menu><div class=Header__MenuItem><img src=/img/rss.svg alt>
<a href=/rss.xml>RSS</a></div><div class=Header__MenuItem><img src=/img/heart.svg alt>
<a href=https://shogosensui.com>Activity</a></div><div class=Header__MenuItem><img src=/img/facebook.svg alt>
<a href=https://www.facebook.com/1000ch.net>Facebook</a></div></nav></header><main class=Main><span class="Label Label--gray pull-left">2015.03.23</span><h1 id=web-componentsに対する問題提起>Web Componentsに対する問題提起</h1><p>Web Componentsについては暫く理想を語ってきたけど、正直そうは上手くいかないと思っている。</p><ul><li><a href=https://html5experts.jp/1000ch/8906/>Web Componentsが変えるWeb開発の未来</a></li><li><a href=https://html5experts.jp/1000ch/11142/>Web Componentsを構成する4つの仕様 ー Web Components基礎編</a></li><li><a href=https://html5experts.jp/1000ch/11626/>Web Componentsでカルーセルギャラリーを作る ー Web Components実践編</a></li><li><a href=https://html5experts.jp/1000ch/11905/>Web Componentsを簡単・便利にするライブラリ「Polymer」を使いこなそう</a></li><li><a href=https://html5experts.jp/1000ch/12477/>基本的な要素・機能を提供するCore ElementsとMaterial Designを実現するPaper Elements</a></li></ul><p>Web Componentsを司る4つの仕様、Custom Elements・Template・Shadow DOM・HTML Importsは、確かにCSSの弱点を解決してくれる。</p><p>しかし、作られた・配布されているコンポーネントを使う側はともかく、Web Componentsの仕様を抑えてコンポーネントを構築していくのは、HTMLにCSSでスタイリングをしていく従来のやり方に比べて圧倒的に敷居が高いように感じる。CSSの言語としての簡易さと引き換えに顕在化してきた弱点にフォーカスされているからShadow DOMのありがたみがあるけど、Web Componentsによるコンポーネント作成が一般化するかどうかを想像するといささか疑問符が残る。</p><p>CSSの設計に悩まなくなるだけで、コンポーネント化する単位といったようなWeb Componentsを使っていく難しさに問題がシフトするだけなんじゃないかって。</p><h2 id=web-componentsの技術そのものへの敷居>Web Componentsの技術そのものへの敷居</h2><p>CSSの問題を取り払いたいだけのはずなのに、Shadow DOMを使う敷居が高い（と、思う）。もっと言えばDeclarative（宣言的）からImperative（命令的）への思想の移行はプログラマでない人にとっては辛いところなんじゃないかと。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#f92672>template</span>&gt;
  &lt;<span style=color:#f92672>style</span>&gt;
    <span style=color:#f92672>input</span> {}
    <span style=color:#f92672>button</span> {}
  &lt;/<span style=color:#f92672>style</span>&gt;
  &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span>&gt;
  &lt;<span style=color:#f92672>button</span>&gt;Button&lt;/<span style=color:#f92672>button</span>&gt;
&lt;/<span style=color:#f92672>template</span>&gt;
&lt;<span style=color:#f92672>script</span>&gt;
  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>ownerDocument</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>currentScript</span>.<span style=color:#a6e22e>ownerDocument</span>;
  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>SampleElementPrototype</span> <span style=color:#f92672>=</span> Object.<span style=color:#a6e22e>create</span>(<span style=color:#a6e22e>HTMLElement</span>.<span style=color:#a6e22e>prototype</span>);

  <span style=color:#a6e22e>SampleElementPrototype</span>.<span style=color:#a6e22e>createdCallback</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () {

    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>template</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ownerDocument</span>.<span style=color:#a6e22e>querySelector</span>(<span style=color:#e6db74>&#39;template&#39;</span>);
    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>clone</span>    <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>importNode</span>(<span style=color:#a6e22e>template</span>.<span style=color:#a6e22e>content</span>, <span style=color:#66d9ef>true</span>);

    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>shadowRoot</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>createShadowRoot</span>();
    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>shadowRoot</span>.<span style=color:#a6e22e>appendChild</span>(<span style=color:#a6e22e>clone</span>);
  };

  document.<span style=color:#a6e22e>registerElement</span>(<span style=color:#e6db74>&#39;sample-element&#39;</span>, {
    <span style=color:#a6e22e>prototype</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>SampleElementPrototype</span>
  });
&lt;/<span style=color:#f92672>script</span>&gt;
</code></pre></div><p>この辺りの問題をPolymerは取り除こうとしている。以下はPolymer v0.8系ではなくv0.5現行の宣言スタイルだが、JavaScriptによるShadow DOMの生成プロセスはPolymerのお作法とともに自動化されている。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#f92672>polymer-element</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sample-element&#34;</span> <span style=color:#a6e22e>noscript</span>&gt;
  &lt;<span style=color:#f92672>template</span>&gt;
    &lt;<span style=color:#f92672>style</span>&gt;
      <span style=color:#f92672>input</span> {}
      <span style=color:#f92672>button</span> {}
    &lt;/<span style=color:#f92672>style</span>&gt;
    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span>&gt;
    &lt;<span style=color:#f92672>button</span>&gt;Button&lt;/<span style=color:#f92672>button</span>&gt;
  &lt;/<span style=color:#f92672>template</span>&gt;
&lt;/<span style=color:#f92672>polymer-element</span>&gt;
</code></pre></div><p>このPolymerのお作法は<a href=/posts/2015/polymer-is.html>Polymerについての所感</a>ではPolymerのアレなところっていう話をしたけど、Web Componentsの簡略化アプローチって大事だなと思った。</p><p>この敷居を取り払うために、仕様が開発者に優しくなるか、またはPolymerのようなライブラリで解決するのか、どちらが正しいのかはわからない。仕様が開発者に優しくなるのはExtensive Webの考えに反するようで気が進まない節もあるが、SizzleからのquerySelectorAllの例もあるので、両者の溝が時間とともに勝手に埋まるのかもしれない。</p><p>てんこ盛りで重いなーと思っていたPolymerの機能も、v0.8以降はプラガブル（カスタムビルド？）になるっぽいし、着々と普及に向けて準備が進んでいる。jQueryのように爆発的に流行るかどうかはわからないけど、流れがよく似ていると思う。</p><h2 id=コンポーネント化の難しさ>コンポーネント化の難しさ</h2><p>どこからどこまでをコンポーネントとするかはノウハウがないし、そもそも時と場合によるける部分が大きいので、実装者の経験則によって良い悪いが決まってくる。</p><ul><li>ひとつのコンポーネントに何の要素を含めるのか</li><li>どういった機能を公開属性とするのか</li><li>抽象化の難しさ・汎用性の持たせ方</li><li>ドキュメントを今まで以上に整備しないとダメだろうな</li><li>他のコンポーネントとの一貫性</li></ul><p>デザイナーとかにコンポーネント化のリテラシーを伝える良いきっかけではあると思う。</p><p>Shadow DOMに入れたスタイルが外に漏れないのはとても素晴らしいけど、外部から完璧に守られるわけではないのを忘れてはいけない。Shadow DOMのスタイリングは<code>/deep/</code>やら<code>::shadow</code>やらで可能になっている。外部からのスタイリングを完璧に遮断してしまってはコンポーネントの汎用性を著しく失うことになるからだ。</p><p>一時的な修正にそういったセレクタの追加を繰り返していれば今までの二の舞だ。結局のところはリファクタリングの繰り返しと、コンポーネント開発者と利用者のリテラシーに委ねられることに変わりない。</p><aside class=Share><div class=Share__Item><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2f1000ch.net%2fposts%2f2015%2fwebcomponents.html" title="Share on Facebook" target=_blank><img src=/img/facebook.svg></a></div><div class=Share__Item><a href="https://twitter.com/share?url=https%3a%2f%2f1000ch.net%2fposts%2f2015%2fwebcomponents.html&text=Web%20Components%e3%81%ab%e5%af%be%e3%81%99%e3%82%8b%e5%95%8f%e9%a1%8c%e6%8f%90%e8%b5%b7" title="Share on Twitter" target=_blank><img src=/img/twitter.svg></a></div></aside><nav class=Pager><div class="Pager__Item Pager__Item--left"><a href=/posts/2015/hugo-boilerplate.html>👈 Hugo Boilerplate</a></div><div class="Pager__Item Pager__Item--right"><a href=/posts/2015/html-css-common-sense.html>現場のプロが教えるHTML+CSSコーディングの最新常識 👉</a></div></nav></main><aside class=Aside><h1>Author</h1><div class=Media><picture>
<source srcset=/img/1000ch.webp type=image/webp><img class=Media__Figure src=/img/1000ch.jpg alt></picture><div class=Media__Body><h3 class=Media__Title>1000ch <a href=https://twitter.com/1000ch class=twitter-follow-button data-show-count=false data-show-screen-name=false>Follow @1000ch</a></h3><p>ソフトウェアエンジニア。SIer でのプログラマーを経て Web 業界に転職して以来、Web 技術に没頭する日々を送っている。Web 標準の動向やアーキテクチャの流行を追いかけつつ、技術啓蒙や OSS 活動に励んでいる。</p></div></div></aside><footer class=Footer><div class=Banner><div class=Banner__Item><a href=https://creativecommons.org/licenses/by-nc-nd/4.0/deed.ja target=_blank><img src=/img/by-nc-nd.png alt="CC BY-NC-ND 4.0" width=80 height=28></a></div><div class=Banner__Item><form action=https://duckduckgo.com/ role=search><input name=sites type=hidden value=1000ch.net>
<input name=q type=search>
<input type=submit value=Search></form></div></div></footer></div><script defer src=https://platform.twitter.com/widgets.js></script><script defer src=https://platform.instagram.com/en_US/embeds.js></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.2/build/highlight.min.js></script><script type=module>
import AffiliateLink from '/js/affiliate-link.js';
import FluidIframe from 'https://cdn.jsdelivr.net/npm/fluid-iframe/dist/index.js';

customElements.define('affiliate-link', AffiliateLink);
customElements.define('fluid-iframe', FluidIframe);

document.querySelectorAll('pre code').forEach(block => {
  hljs.highlightBlock(block);
});

if (navigator.serviceWorker) {
  navigator.serviceWorker.register('/sw.js');
}
</script></body></html>