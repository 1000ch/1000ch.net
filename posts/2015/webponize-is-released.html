<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>WebPonizeをリリースした - EagleLand</title><link rel=icon href=/favicon.png><link rel="shortcut icon" href=/favicon.png><link rel="shortcut icon" href=/favicon.svg type=image/svg+xml sizes=any><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/github.min.css><link rel=stylesheet href=/css/font.css><link rel=stylesheet href=/css/settings.css><link rel=stylesheet href=/css/tools.css><link rel=stylesheet href=/css/generic.css><link rel=stylesheet href=/css/base.css><link rel=stylesheet href=/css/objects.css><link rel=stylesheet href=/css/components.css><link rel=stylesheet href=/css/trumps.css><link rel=alternate href=/rss.xml title=1000ch.net type=application/rss+xml><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto+Mono"><meta name=author content="Shogo Sensui"><meta name=copyright content="Copyright (c) Shogo Sensui; Licensed under Creative Commons Attribution-Noncommercial-Share Japan"><meta property="og:description" content="WebPonizeをリリースした WebPonizeは前に触れた通り、JPEGやPNGをWebPに変換するMacのアプリケーション。App Storeに登録するために色々と試行錯誤していたんだけど、アプリの目的と反する可能性が出てきたので断念し、ダウンロード形式を取ることにした話。
アプリに掛かる制限が色々と厳しい App Storeで公開するためにはAppleの審査を突破する必要があるが、最初に申請したときにRejectされた理由は、ユーザーインターフェースのこと、期待する動作をしていないことの2点だった。
 From Apple
 2.3 - Apps that do not perform as advertised by the developer will be rejected 6.1 - Apps must comply with all terms and conditions explained in the Apple Macintosh Human Interface Guidelines 2.3  The app does not achieve the core functionality described in your marketing materials or release notes.
 ユーザーインターフェース ユーザーインターフェースについてはFileメニュー内にOpenアイテムがなく、ドラッグアンドドロップだけでなく、Macアプリの基本的なインターフェースガイドラインとしてヘッダーメニューも整備しなさいという指摘だった。これは単純に失念していたので実装した。
サンドボックスキー 問題は後者の期待する動作をしていないというもの。色々調査した結果から推測すると、特定の条件に該当するアプリケーションの動作を許容するアプリにはサンドボックスキーと呼ばれるフラグをオンにしないとApp Storeの公開に漕ぎ着くことができないらしい。フラグは以下の様なもの。
 Network Incoming/Outgoing Connectionにアクセスできるか Hardware カメラ・Microphone・USB・印刷機能へアクセスできるか App Data 連絡先・位置情報・カレンダー情報へアクセスできるか File Access ユーザー選択・ダウンロードフォルダ・ピクチャーフォルダ・ミュージックフォルダ・ムービーフォルダへアクセスできるか  こうした情報に闇雲にアクセスできてしまうと、ユーザーが意図しない事故も起きてしまうこともあるだろう。App Storeに公開されているアプリは比較的安心できるということになる。 「このアプリはカメラ機能へのアクセスを求めています」 的な確認ダイアログとか出るんだと思う。"><meta property="og:image" content="https://1000ch.net/img/apple-touch-icon.png"><meta name=twitter:card content="summary"><meta property="og:type" content="article"><meta property="og:url" content="https://1000ch.net/posts/2015/webponize-is-released.html"><meta property="og:site_name" content="EagleLand"><meta property="og:title" content="WebPonizeをリリースした"><meta name=twitter:site content="@1000ch"><meta name=twitter:url content="https://1000ch.net/posts/2015/webponize-is-released.html"><meta name=twitter:title content="WebPonizeをリリースした"><meta name=google-site-verification content="BWewniqiBzRmrhpj51eLwug-F4hamFfyznl-ARb-Y4Y"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed sizes=114x114 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed sizes=72x72 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49530352-1','1000ch.net');ga('send','pageview');</script></head><body><div class=Container><header class=Header><h1 class=Header__Title><a href=/>EagleLand</a></h1><nav class=Header__Menu><div class=Header__MenuItem><img src=/img/rss.svg alt>
<a href=/rss.xml>RSS</a></div><div class=Header__MenuItem><img src=/img/heart.svg alt>
<a href=https://shogosensui.com>Activity</a></div><div class=Header__MenuItem><img src=/img/facebook.svg alt>
<a href=https://www.facebook.com/1000ch.net>Facebook</a></div></nav></header><main class=Main><span class="Label Label--gray pull-left">2015.04.29</span><h1 id=webponizeをリリースした>WebPonizeをリリースした</h1><p>WebPonizeは<a href=/posts/2015/webponize.html>前に触れた</a>通り、JPEGやPNGをWebPに変換するMacのアプリケーション。App Storeに登録するために色々と試行錯誤していたんだけど、アプリの目的と反する可能性が出てきたので断念し、ダウンロード形式を取ることにした話。</p><h2 id=アプリに掛かる制限が色々と厳しい>アプリに掛かる制限が色々と厳しい</h2><p>App Storeで公開するためにはAppleの審査を突破する必要があるが、最初に申請したときにRejectされた理由は、ユーザーインターフェースのこと、期待する動作をしていないことの2点だった。</p><blockquote><p>From Apple</p><ul><li>2.3 - Apps that do not perform as advertised by the developer will be rejected</li><li>6.1 - Apps must comply with all terms and conditions explained in the Apple Macintosh Human Interface Guidelines
2.3</li></ul><p>The app does not achieve the core functionality described in your marketing materials or release notes.</p></blockquote><h3 id=ユーザーインターフェース>ユーザーインターフェース</h3><p>ユーザーインターフェースについてはFileメニュー内にOpenアイテムがなく、ドラッグアンドドロップだけでなく、Macアプリの基本的なインターフェースガイドラインとしてヘッダーメニューも整備しなさいという指摘だった。これは単純に失念していたので実装した。</p><h3 id=サンドボックスキー>サンドボックスキー</h3><p>問題は後者の期待する動作をしていないというもの。色々調査した結果から推測すると、特定の条件に該当するアプリケーションの動作を許容するアプリにはサンドボックスキーと呼ばれるフラグをオンにしないとApp Storeの公開に漕ぎ着くことができないらしい。フラグは以下の様なもの。</p><ul><li><strong>Network</strong> Incoming/Outgoing Connectionにアクセスできるか</li><li><strong>Hardware</strong> カメラ・Microphone・USB・印刷機能へアクセスできるか</li><li><strong>App Data</strong> 連絡先・位置情報・カレンダー情報へアクセスできるか</li><li><strong>File Access</strong> ユーザー選択・ダウンロードフォルダ・ピクチャーフォルダ・ミュージックフォルダ・ムービーフォルダへアクセスできるか</li></ul><p>こうした情報に闇雲にアクセスできてしまうと、ユーザーが意図しない事故も起きてしまうこともあるだろう。App Storeに公開されているアプリは比較的安心できるということになる。 <strong>「このアプリはカメラ機能へのアクセスを求めています」</strong> 的な確認ダイアログとか出るんだと思う。</p><p>WebPonizeはドラッグアンドドロップした画像ファイルに対してアクセスする必要があるが、これを許可するフラグがそもそもない。有効化する手段はあるにはありそうだが、 <strong>「WebPonizeはドロップしたファイルへアクセスします」</strong> のような確認を <strong>都度</strong> 出さないとダメっぽい。さすがにこれはイケてない。</p><h2 id=アーカイブファイルの配布と自動アップデート>アーカイブファイルの配布と自動アップデート</h2><p>以上のような経緯を経て、アーカイブファイルを配布することにした。ImageOptimやらImageAlphaもApp Storeで公開されていないけど、もしかしたら同じ問題に直面したんじゃないかと予想している。</p><p>App Storeで配布しないということは、アプリのアップデートにApp Storeの更新機能を使えないということになるので、アプリケーションそのものに自動更新がないと辛そう。この実装には<a href=https://github.com/sparkle-project>Sparkle Project</a>のフレームワークを利用している。なんかもう、全部<a href=https://github.com/pornel>Pornel</a>が踏んできた道っぽい。</p><h2 id=githubで公開した>GitHubで公開した</h2><p><a href=https://github.com/1000ch/webponize><img src=/img/posts/2015/webponize-is-released/webponize.png alt></a></p><p><a href=https://github.com/1000ch/webponize>1000ch/webponize</a>からダウンロードできます、よろしくお願いします(´・ω・`)</p><aside class=Share><div class=Share__Item><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2f1000ch.net%2fposts%2f2015%2fwebponize-is-released.html" title="Share on Facebook" target=_blank><img src=/img/facebook.svg></a></div><div class=Share__Item><a href="https://twitter.com/share?url=https%3a%2f%2f1000ch.net%2fposts%2f2015%2fwebponize-is-released.html&text=WebPonize%e3%82%92%e3%83%aa%e3%83%aa%e3%83%bc%e3%82%b9%e3%81%97%e3%81%9f" title="Share on Twitter" target=_blank><img src=/img/twitter.svg></a></div></aside><nav class=Pager><div class="Pager__Item Pager__Item--left"><a href=/posts/2015/wdpress-frontend-series-serviceworker.html>👈 WEB+DB PRESS Vol.86 Webフロントエンド最前線「Service Workerで実現するオフラインWebアプリケーション」</a></div><div class="Pager__Item Pager__Item--right"><a href=/posts/2015/introduction-to-webp.html>【翻訳】Introduction to WebP 👉</a></div></nav></main><aside class=Aside><h1>Author</h1><div class=Media><picture>
<source srcset=/img/1000ch.webp type=image/webp><img class=Media__Figure src=/img/1000ch.jpg alt></picture><div class=Media__Body><h3 class=Media__Title>1000ch <a href=https://twitter.com/1000ch class=twitter-follow-button data-show-count=false data-show-screen-name=false>Follow @1000ch</a></h3><p>ソフトウェアエンジニア。SIer でのプログラマーを経て Web 業界に転職して以来、Web 技術に没頭する日々を送っている。Web 標準の動向やアーキテクチャの流行を追いかけつつ、技術啓蒙や OSS 活動に励んでいる。</p></div></div></aside><footer class=Footer><div class=Banner><div class=Banner__Item><a href=https://creativecommons.org/licenses/by-nc-nd/4.0/deed.ja target=_blank><img src=/img/by-nc-nd.png alt="CC BY-NC-ND 4.0" width=80 height=28></a></div><div class=Banner__Item><a href=https://cloud.feedly.com/#subscription%2Ffeed%2Fhttp%3A%2F%2Fhttps%3A%2F%2F1000ch.net%2Findex.xml target=_blank><img src=https://s3.feedly.com/img/follows/feedly-follow-rectangle-flat-medium_2x.png alt="follow me on feedly" width=71 height=28></a></div><div class=Banner__Item><form action=https://duckduckgo.com/ role=search><input name=sites type=hidden value=1000ch.net>
<input name=q type=search>
<input type=submit value=Search></form></div></div></footer></div><script defer src=https://platform.twitter.com/widgets.js></script><script defer src=https://platform.instagram.com/en_US/embeds.js></script><script defer src=https://assets.codepen.io/assets/embed/ei.js></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/highlight.min.js></script><script type=module>
import AffiliateLink from '/js/affiliate-link.js';
import FluidIframe from 'https://cdn.jsdelivr.net/npm/fluid-iframe/dist/index.js';

customElements.define('affiliate-link', AffiliateLink);
customElements.define('fluid-iframe', FluidIframe);

document.querySelectorAll('pre code').forEach(block => {
  hljs.highlightBlock(block);
});

if (navigator.serviceWorker) {
  navigator.serviceWorker.register('/sw.js');
}
</script></body></html>