<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ã™ã‚‹å„ç¨®ãƒ–ãƒ©ã‚¦ã‚¶API - EagleLand</title>
<link rel=manifest href=manifest.json><link rel=icon href=/favicon.png><link rel="shortcut icon" href=/favicon.png><link rel="shortcut icon" href=/favicon.svg type=image/svg+xml sizes=any><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.2/build/styles/dracula.min.css><link rel=stylesheet href=/css/settings.css><link rel=stylesheet href=/css/tools.css><link rel=stylesheet href=/css/generic.css><link rel=stylesheet href=/css/base.css><link rel=stylesheet href=/css/objects.css><link rel=stylesheet href=/css/components.css><link rel=stylesheet href=/css/trumps.css><link rel=alternate href=/rss.xml title=1000ch.net type=application/rss+xml><meta name=author content="Shogo Sensui"><meta name=copyright content="Copyright (c) Shogo Sensui; Licensed under Creative Commons Attribution-Noncommercial-Share Japan"><meta property="og:description" content="â—¯â—¯ Timing APIã¯W3Cã®Web Performance Working Groupã®Ilya Grigorikã‚’ä¸­å¿ƒã«ç­–å®šãŒé€²ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹ãƒ–ãƒ©ã‚¦ã‚¶APIã§ã‚ã‚‹ã€‚
User Timing API: ä»»æ„ã®ãƒ©ãƒ™ãƒ«ã‚’ç”¨ã„ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Ÿè¡Œã«ã‹ã‹ã£ãŸã‚’å–å¾—ã™ã‚‹ Navigation Timing API: ãƒ–ãƒ©ã‚¦ã‚¶ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ç™ºç”Ÿã—ãŸæ™‚é–“ã‚’å–å¾—ã™ã‚‹ Resource Timing API: ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ­ãƒ¼ãƒ‰ã«éš›ã—ã¦ç™ºç”Ÿã—ãŸå„ç¨®æ™‚é–“ã‚’å–å¾—ã™ã‚‹ Frame Timing API: ãƒ–ãƒ©ã‚¦ã‚¶ãƒ•ãƒ¬ãƒ¼ãƒ ã®å†…è¨³ã‚’å–å¾—ã™ã‚‹ Server Timing API: ã‚µãƒ¼ãƒãƒ¼å‡¦ç†ã®å†…è¨³ã‚’å–å¾—ã™ã‚‹ High Resolution Time API: é«˜ç²¾åº¦ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’æä¾›ã™ã‚‹ ãƒ–ãƒ©ã‚¦ã‚¶ã®windowã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«performanceã¨ã„ã†ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã‚‹ã®ã§ã€DevToolsã‚’é–‹ã„ã¦Consoleãƒ‘ãƒãƒ«ã§window.performanceã¨å…¥åŠ›ã™ã‚‹ã¨ã€ä½•ã‚„ã‚‰è¦‹è¦šãˆã®ã‚ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«æ•°å€¤ãŒå…¥ã£ã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚‹ã€‚
ãªã‹ã§ã‚‚Frame Timingã¨Server Timingã¯è‹¥ãã€ãƒ–ãƒ©ã‚¦ã‚¶ã«å®Ÿé¨“çš„å®Ÿè£…ã¯ãŠã‚ã‹ã‚¹ãƒšãƒƒã‚¯ã«é–¢ã™ã‚‹è³‡æ–™ã‚‚å°‘ãªã„ã€‚ã“ã“ã§è¨˜è¼‰ã—ã¦ã„ã‚‹å†…å®¹ã¯ã“ã‚Œã‹ã‚‰å¤‰ã‚ã‚‹å¯èƒ½æ€§ã¯é«˜ã„ã®ã§ã”æ³¨æ„ã‚’ã€‚
User Timing API User Timing APIã¯ã€performance.mark()ã¨performance.measure()ã§ä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹APIã€‚performance.mark()ã§ä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ãƒãƒ¼ã‚¯ã‚’ã—ã€performance.measure()ã§ãƒãƒ¼ã‚¯é–“ã®å·®åˆ†ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ãªä½¿ã„æ–¹ã€‚
ä»¥ä¸‹ã¯XMLHttpRequestã«ã‚ˆã‚‹éåŒæœŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹ä¾‹ã€‚performance.mark()ã‚„performance.measure()ã—ãŸãƒ‡ãƒ¼ã‚¿ã¯ã€performance.getEntriesByType('mark')ã®ã‚ˆã†ã«è¨ˆæ¸¬ã‚¿ã‚¤ãƒ—ã‚’æŒ‡å®šã—ã¦å–å¾—å¯èƒ½ã«ãªã£ã¦ã„ã‚‹ã€‚
let xhr = new XMLHttpRequest(); xhr.open('GET', '/', true); xhr.onload = e => { performance.mark('mark-xhr-end'); performance.measure('xhr-start-end', 'mark-xhr-start', 'mark-xhr-end'); console.log(performance.getEntriesByType('mark')); console.log(performance.getEntriesByType('measure')); }; performance.mark('mark-xhr-start'); xhr.send(); ä»¥å‰ã¾ã§ã¯DevToolsã®Timelineãƒ‘ãƒãƒ«ã«ã“ã®ãƒãƒ¼ã‚¯ã—ãŸæƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ãŸãŒã€53å‘¨è¾ºã§ã¯æ¶ˆãˆã¦ã„ã‚‹æ°—ãŒã™ã‚‹ã€‚Canaryã ã‹ã‚‰ã‹ã‚‚ã—ã‚Œãªã„ã‘ã©ã€‚
Navigation Timing API Navigation Timing APIã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰å®Œäº†ã¾ã§ã®DOMContentLoadedã‚„loadã®ã‚ˆã†ãªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹APIã€‚"><meta property="og:image" content="https://1000ch.net//img/apple-touch-icon.png"><meta name=twitter:card content="summary"><meta property="og:type" content="article"><meta property="og:url" content="https://1000ch.net/posts/2016/performance-api/"><meta property="og:site_name" content="EagleLand"><meta property="og:title" content="ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ã™ã‚‹å„ç¨®ãƒ–ãƒ©ã‚¦ã‚¶API"><meta name=twitter:site content="@1000ch"><meta name=twitter:url content="https://1000ch.net/posts/2016/performance-api/"><meta name=twitter:title content="ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ã™ã‚‹å„ç¨®ãƒ–ãƒ©ã‚¦ã‚¶API"><meta name=google-site-verification content="BWewniqiBzRmrhpj51eLwug-F4hamFfyznl-ARb-Y4Y"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed sizes=114x114 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed sizes=72x72 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-49530352-1","1000ch.net"),ga("send","pageview")</script></head><body><div class=container><header class=header><h1 class=header-title><a href=/><img src=/img/icon.svg>
<span>EagleLand</span></a></h1><nav><a href=/rss.xml>ğŸ“» RSS</a>
<a href="https://www.google.co.jp/search?q=site%3A1000ch.net">ğŸ” æ¤œç´¢</a>
<a href=https://shogosensui.com>ğŸŒ Author</a></nav></header><main class=main><h1>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ã™ã‚‹å„ç¨®ãƒ–ãƒ©ã‚¦ã‚¶API</h1><p style=margin:0;text-align:right>Published at 2016-06-14</p><p>â—¯â—¯ Timing APIã¯W3Cã®Web Performance Working Groupã®Ilya Grigorikã‚’ä¸­å¿ƒã«ç­–å®šãŒé€²ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹ãƒ–ãƒ©ã‚¦ã‚¶APIã§ã‚ã‚‹ã€‚</p><ul><li><a href=http://w3c.github.io/user-timing/>User Timing API</a>: ä»»æ„ã®ãƒ©ãƒ™ãƒ«ã‚’ç”¨ã„ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Ÿè¡Œã«ã‹ã‹ã£ãŸã‚’å–å¾—ã™ã‚‹</li><li><a href=http://w3c.github.io/navigation-timing/>Navigation Timing API</a>: ãƒ–ãƒ©ã‚¦ã‚¶ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ç™ºç”Ÿã—ãŸæ™‚é–“ã‚’å–å¾—ã™ã‚‹</li><li><a href=http://w3c.github.io/resource-timing/>Resource Timing API</a>: ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ­ãƒ¼ãƒ‰ã«éš›ã—ã¦ç™ºç”Ÿã—ãŸå„ç¨®æ™‚é–“ã‚’å–å¾—ã™ã‚‹</li><li><a href=http://w3c.github.io/frame-timing/>Frame Timing API</a>: ãƒ–ãƒ©ã‚¦ã‚¶ãƒ•ãƒ¬ãƒ¼ãƒ ã®å†…è¨³ã‚’å–å¾—ã™ã‚‹</li><li><a href=https://w3c.github.io/server-timing/>Server Timing API</a>: ã‚µãƒ¼ãƒãƒ¼å‡¦ç†ã®å†…è¨³ã‚’å–å¾—ã™ã‚‹</li><li><a href=http://w3c.github.io/hr-time/>High Resolution Time API</a>: é«˜ç²¾åº¦ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’æä¾›ã™ã‚‹</li></ul><p>ãƒ–ãƒ©ã‚¦ã‚¶ã®<code>window</code>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«<code>performance</code>ã¨ã„ã†ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã‚‹ã®ã§ã€DevToolsã‚’é–‹ã„ã¦Consoleãƒ‘ãƒãƒ«ã§<code>window.performance</code>ã¨å…¥åŠ›ã™ã‚‹ã¨ã€ä½•ã‚„ã‚‰è¦‹è¦šãˆã®ã‚ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«æ•°å€¤ãŒå…¥ã£ã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚‹ã€‚</p><p>ãªã‹ã§ã‚‚Frame Timingã¨Server Timingã¯è‹¥ãã€ãƒ–ãƒ©ã‚¦ã‚¶ã«å®Ÿé¨“çš„å®Ÿè£…ã¯ãŠã‚ã‹ã‚¹ãƒšãƒƒã‚¯ã«é–¢ã™ã‚‹è³‡æ–™ã‚‚å°‘ãªã„ã€‚ã“ã“ã§è¨˜è¼‰ã—ã¦ã„ã‚‹å†…å®¹ã¯ã“ã‚Œã‹ã‚‰å¤‰ã‚ã‚‹å¯èƒ½æ€§ã¯é«˜ã„ã®ã§ã”æ³¨æ„ã‚’ã€‚</p><h2 id=user-timing-api>User Timing API</h2><p><a href=https://w3c.github.io/user-timing/>User Timing API</a>ã¯ã€<code>performance.mark()</code>ã¨<code>performance.measure()</code>ã§ä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹APIã€‚<code>performance.mark()</code>ã§ä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ãƒãƒ¼ã‚¯ã‚’ã—ã€<code>performance.measure()</code>ã§ãƒãƒ¼ã‚¯é–“ã®å·®åˆ†ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ãªä½¿ã„æ–¹ã€‚</p><p>ä»¥ä¸‹ã¯<code>XMLHttpRequest</code>ã«ã‚ˆã‚‹éåŒæœŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹ä¾‹ã€‚<code>performance.mark()</code>ã‚„<code>performance.measure()</code>ã—ãŸãƒ‡ãƒ¼ã‚¿ã¯ã€<code>performance.getEntriesByType('mark')</code>ã®ã‚ˆã†ã«è¨ˆæ¸¬ã‚¿ã‚¤ãƒ—ã‚’æŒ‡å®šã—ã¦å–å¾—å¯èƒ½ã«ãªã£ã¦ã„ã‚‹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>xhr</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>XMLHttpRequest</span>();
</span></span><span style=display:flex><span><span style=color:#a6e22e>xhr</span>.<span style=color:#a6e22e>open</span>(<span style=color:#e6db74>&#39;GET&#39;</span>, <span style=color:#e6db74>&#39;/&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>xhr</span>.<span style=color:#a6e22e>onload</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>e</span> =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>mark</span>(<span style=color:#e6db74>&#39;mark-xhr-end&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>measure</span>(<span style=color:#e6db74>&#39;xhr-start-end&#39;</span>, <span style=color:#e6db74>&#39;mark-xhr-start&#39;</span>, <span style=color:#e6db74>&#39;mark-xhr-end&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>getEntriesByType</span>(<span style=color:#e6db74>&#39;mark&#39;</span>));
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>getEntriesByType</span>(<span style=color:#e6db74>&#39;measure&#39;</span>));
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span><span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>mark</span>(<span style=color:#e6db74>&#39;mark-xhr-start&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>xhr</span>.<span style=color:#a6e22e>send</span>();
</span></span></code></pre></div><p>ä»¥å‰ã¾ã§ã¯DevToolsã®Timelineãƒ‘ãƒãƒ«ã«ã“ã®ãƒãƒ¼ã‚¯ã—ãŸæƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ãŸãŒã€53å‘¨è¾ºã§ã¯æ¶ˆãˆã¦ã„ã‚‹æ°—ãŒã™ã‚‹ã€‚Canaryã ã‹ã‚‰ã‹ã‚‚ã—ã‚Œãªã„ã‘ã©ã€‚</p><h2 id=navigation-timing-api>Navigation Timing API</h2><p><a href=https://w3c.github.io/navigation-timing/>Navigation Timing API</a>ã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰å®Œäº†ã¾ã§ã®<code>DOMContentLoaded</code>ã‚„<code>load</code>ã®ã‚ˆã†ãªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹APIã€‚</p><p><img src=./processing-model.svg alt="Processing Model"></p><p><code>performance.timing</code>ã‹ã‚‰ä»¥ä¸‹ã®æƒ…å ±ã‚’å–å¾—ã§ãã‚‹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;Name: &#39;</span>       <span style=color:#f92672>+</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>name</span>      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;Entry Type: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>entryType</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;Start Time: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>startTime</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;Duration: &#39;</span>   <span style=color:#f92672>+</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>duration</span>  <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;Unload: &#39;</span>     <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>unloadEventEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>unloadEventStart</span>)   <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;Redirect: &#39;</span>   <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>redirectEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>redirectStart</span>)         <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;App Cache: &#39;</span>  <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>domainLookupStart</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>fetchStart</span>)      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;DNS: &#39;</span>        <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>domainLookupEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>domainLookupStart</span>) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;TCP: &#39;</span>        <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>connectEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>connectStart</span>)           <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;Request: &#39;</span>    <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>responseStart</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>requestStart</span>)        <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;Response: &#39;</span>   <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>responseEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>responseStart</span>)         <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;Processing: &#39;</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>loadEventStart</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>responseEnd</span>)        <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;Onload: &#39;</span>     <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>loadEventEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>loadEventStart</span>)       <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span>
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p>ã“ã“ã‹ã‚‰<code>PerformanceEntry</code>ãªã©ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«å¯¾å¿œã™ã‚‹Navigation Timing Level 2ã¨ã„ã†ä»•æ§˜ã®ç­–å®šãŒé€²ã‚“ã§ã„ã‚‹ã€‚ã“ã‚Œã¯å¾Œè¿°ã®<code>PerformanceObserver</code>ã«å¿…è¦ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ãªã£ã¦ã„ã‚‹ã€‚</p><p><code>DOMContentLoaded</code>ã‚„<code>load</code>ã€<code>document.readyState</code>ã¨ã®å¯¾å¿œé–¢ä¿‚ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šãã†ã€‚</p><table><thead><tr><th>Browser lifecycle</th><th><code>document.readyState</code></th><th>Navigation Timing API</th></tr></thead><tbody><tr><td></td><td></td><td><code>timing.domLoading</code></td></tr><tr><td></td><td><code>loading</code></td><td></td></tr><tr><td></td><td></td><td><code>timing.domInteractive</code></td></tr><tr><td></td><td><code>interactive</code></td><td></td></tr><tr><td><code>DOMContentLoaded</code></td><td></td><td><code>timing.domContentLoadedEventStart</code></td></tr><tr><td></td><td></td><td><code>timing.domContentLoadedEventEnd</code></td></tr><tr><td></td><td></td><td><code>timing.domComplete</code></td></tr><tr><td></td><td><code>complete</code></td><td></td></tr><tr><td><code>load</code></td><td></td><td><code>timing.loadEvent</code></td></tr></tbody></table><h2 id=resource-timing-api>Resource Timing API</h2><p><a href=https://w3c.github.io/resource-timing/>Resource Timing API</a>ã¯ãƒšãƒ¼ã‚¸å†…ã§ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ã«é–¢ã™ã‚‹æƒ…å ±ã‚’å–å¾—ã™ã‚‹APIã€‚é›‘ã«è¨€ãˆã°Navigation Timing APIã®ã‚µãƒ–ãƒªã‚½ãƒ¼ã‚¹ç‰ˆã€‚</p><p><code>performance.getEntriesByType()</code>ã«<code>resource</code>ã‚’æŒ‡å®šã—ã¦å–å¾—ã™ã‚‹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>resource</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>getEntriesByType</span>(<span style=color:#e6db74>&#39;resource&#39;</span>)) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Name: &#39;</span>       <span style=color:#f92672>+</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>name</span>      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Entry Type: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>entryType</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Start Time: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>startTime</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Duration: &#39;</span>   <span style=color:#f92672>+</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>duration</span>  <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Redirect: &#39;</span>   <span style=color:#f92672>+</span> (<span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>redirectEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>redirectStart</span>)         <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;App Cache: &#39;</span>  <span style=color:#f92672>+</span> (<span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>domainLookupStart</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>fetchStart</span>)      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;DNS: &#39;</span>        <span style=color:#f92672>+</span> (<span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>domainLookupEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>domainLookupStart</span>) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;TCP: &#39;</span>        <span style=color:#f92672>+</span> (<span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>connectEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>connectStart</span>)           <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Request: &#39;</span>    <span style=color:#f92672>+</span> (<span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>responseStart</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>requestStart</span>)        <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Response: &#39;</span>   <span style=color:#f92672>+</span> (<span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>responseEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>responseStart</span>)         <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Processing: &#39;</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>loadEventStart</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>responseEnd</span>)        <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=frame-timing-api>Frame Timing API</h2><p><a href=https://w3c.github.io/frame-timing/>Frame Timing API</a>ã¯ãƒšãƒ¼ã‚¸æç”»ã®ãƒ•ãƒ¬ãƒ¼ãƒ æƒ…å ±ã‚’å–å¾—ã™ã‚‹APIã€‚Navigation Timing APIã‚„Resource Timing APIã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å‡¦ç†ã«é–¢ã™ã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æƒ…å ±ã ãŒã€ã“ã‚Œã¯ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æƒ…å ±ã¨ã„ã†ã“ã¨ã«ãªã‚‹ã€‚</p><p>1ãƒ•ãƒ¬ãƒ¼ãƒ ã¯ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã«ãŠã‘ã‚‹<code>vsync</code>ã‹ã‚‰<code>vsync</code>ã¾ã§ã‚’æŒ‡ã™ã€‚</p><p><img src=./frame-model.png alt="Frame Model"></p><p><code>performance.getEntriesByType()</code>ã«<code>renderer</code>ãªã„ã—<code>composite</code>ã‚’æŒ‡å®šã—ã¦å–å¾—ã™ã‚‹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>renderer</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>getEntriesByType</span>(<span style=color:#e6db74>&#39;renderer&#39;</span>)) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Name: &#39;</span>       <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>name</span>      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Entry Type: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>entryType</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Start Time: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>startTime</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Duration: &#39;</span>   <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>duration</span>  <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>composite</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>getEntriesByType</span>(<span style=color:#e6db74>&#39;composite&#39;</span>)) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Name: &#39;</span>       <span style=color:#f92672>+</span> <span style=color:#a6e22e>composite</span>.<span style=color:#a6e22e>name</span>      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Entry Type: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>composite</span>.<span style=color:#a6e22e>entryType</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Start Time: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>composite</span>.<span style=color:#a6e22e>startTime</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Duration: &#39;</span>   <span style=color:#f92672>+</span> <span style=color:#a6e22e>composite</span>.<span style=color:#a6e22e>duration</span>  <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>renderer</code>ã¯ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã‹ã‚‰Compositorã¸è¡Œã‚ã‚Œã‚‹ã‚³ãƒŸãƒƒãƒˆã€<code>composite</code>ã¯Compositorã‹ã‚‰ã®ãƒ‰ãƒ­ãƒ¼ã‚³ãƒ¼ãƒ«ã«é–¢ã™ã‚‹æƒ…å ±ã§ã‚ã‚‹ã€‚</p><p>ã“ã‚Œã‚‰ã¯å¿…ãšã—ã‚‚å¯¾ã«ã¯ãªã‚‰ãšã€Compositorã‹ã‚‰ã®ãƒ‰ãƒ­ãƒ¼ã‚³ãƒ¼ãƒ«ã¯ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã‹ã‚‰ã®ã‚³ãƒŸãƒƒãƒˆã«ä¾å­˜ã—ãªã„ã€‚ä¾‹ãˆã°ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãªã‚“ã‹ã®æ™‚ã¯ãƒ“ãƒƒãƒˆãƒãƒƒãƒ—ã®å†æ§‹ç¯‰ã‚’ã›ãšãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã¸ã®ãƒ”ã‚¯ã‚»ãƒ«ã‚’é€ã‚Šç›´ã™ã¨ã„ã†ã“ã¨ã ã¨æ€ã‚ã‚Œã‚‹ã€‚ãŸã¶ã‚“ã€‚</p><h2 id=server-timing-api>Server Timing API</h2><p><a href=https://w3c.github.io/server-timing/>Server Timing API</a>ã¯ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ã®<code>Server-Timing</code>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚µãƒ¼ãƒãƒ¼ã®å„å‡¦ç†ã«ã‹ã‹ã£ãŸæ™‚é–“ã‚’å«ã‚ã¦ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ãã‚Œã‚’å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã¨ã„ã†APIã€‚Ilyaã®Gistï¼ˆ<a href=https://gist.github.com/igrigorik/97dfe5ea9b4a85162e25>igrigorik/server-timing.md</a>ï¼‰ãƒ¬ãƒ™ãƒ«ãªã®ã§ã€ã¾ã ã¾ã ä»•æ§˜ã®ç€åœ°ã«ã¯é ãã†ã ãŒã€ä¾¿åˆ©ãã†ã€‚</p><pre tabindex=0><code>HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
Cache-Control: max-age=360, public
Transfer-Encoding: chunked
Server-Timing: db=150; cache=22
</code></pre><p>ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ã®<code>Server-Timing</code>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚Œã°ã€ã“ã®å ´åˆã¯DBã‚¢ã‚¯ã‚»ã‚¹ã«150msã‹ã‹ã‚Šã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å‚ç…§ã«22msã‹ã‹ã£ãŸã¨ã„ã†ã“ã¨ãŒè¡¨ã›ã‚‹ã€‚</p><p><code>performance.getEntriesByType()</code>ã«<code>server</code>ã‚’æŒ‡å®šã—ã¦å–å¾—ã™ã‚‹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>server</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>getEntriesByType</span>(<span style=color:#e6db74>&#39;server&#39;</span>)) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Name: &#39;</span>        <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>name</span>        <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Entry Type: &#39;</span>  <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>entryType</span>   <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Start Time: &#39;</span>  <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>startTime</span>   <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Duration: &#39;</span>    <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>duration</span>    <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Metric: &#39;</span>      <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>metric</span>      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Description: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>description</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=high-resolution-time-api>High Resolution Time API</h2><p><a href=https://www.w3.org/TR/hr-time/>High Resolution Time API</a>ã¯ãƒã‚¤ã‚¯ãƒ­ç§’å˜ä½ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹ãŸã‚ã®APIã€‚<code>Date.now()</code>ã®ãƒŸãƒªç§’ã§ã¯ä¸ååˆ†ã¨ã„ã†ã“ã¨ã§ã€ç´°ã‹ãªè¨ˆæ¸¬ã«ã¯<code>performance.now()</code>ã‚’ä½¿ã†ã¨è‰¯ã„ã€‚</p><p><code>performance.now()</code>ãŒè¿”ã™<code>DOMHighResTimeStamp</code>ã¯ã€ã“ã“ã¾ã§ç´¹ä»‹ã—ã¦ããŸå„APIã®æ™‚é–“ã«é–¢ã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã‚‚ä½¿ã‚ã‚Œã¦ã„ã‚‹ã€‚å†…éƒ¨çš„ã«ã¯ãŸã ã®<code>double</code>ã§ã‚ã‚‹ã€‚</p><h2 id=performance-observer>Performance Observer</h2><p>ãƒ–ãƒ©ã‚¦ã‚¶ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹APIã¯å…ˆã«æŒ™ã’ãŸã€User Timing APIãƒ»Navigation Timing APIãƒ»Resource Timing APIãƒ»Frame Timing APIãƒ»Server Timing APIã®5ã¤ãŒã‚ã‚‹ã€‚<a href=https://w3c.github.io/performance-timeline/>Performance Observer</a>ã¯ã“ã‚Œã‚‰ã®å¤‰æ›´ã‚’ç›£è¦–ã™ã‚‹APIã§ã‚ã‚‹ã€‚</p><p><code>PerformanceObserver</code>ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã‚Šã€ç›£è¦–é–‹å§‹ã«ã¯<code>observe()</code>ã€çµ‚äº†ã«ã¯<code>disconnect()</code>ã‚’å®Ÿè¡Œã™ã‚‹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>observer</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>PerformanceObserver</span>(<span style=color:#a6e22e>list</span> =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>entry</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>list</span>.<span style=color:#a6e22e>getEntries</span>()) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;Name: &#39;</span>       <span style=color:#f92672>+</span> <span style=color:#a6e22e>entry</span>.<span style=color:#a6e22e>name</span>      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;Entry Type: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>entry</span>.<span style=color:#a6e22e>entryType</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;Start Time: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>entry</span>.<span style=color:#a6e22e>startTime</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;Duration: &#39;</span>   <span style=color:#f92672>+</span> <span style=color:#a6e22e>entry</span>.<span style=color:#a6e22e>duration</span>  <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>observer</span>.<span style=color:#a6e22e>observe</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>entryTypes</span> <span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;resource&#39;</span>]
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>observer</span>.<span style=color:#a6e22e>disconnect</span>();
</span></span></code></pre></div><p><code>observe()</code>ã®å¼•æ•°ã«ã¯ã©ã®ç¨®é¡ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ç›£è¦–ã™ã‚‹ã‹ã‚’æŒ‡å®šã—ã¦ã‚ã’ã‚‹ã€‚ã“ã“ã§ã¯Resource Timing APIã§å–å¾—ã™ã‚‹å€¤ã‚’ç›£è¦–ã™ã‚‹ã¹ã<code>resource</code>ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ãŒã€ã“ã“ã¾ã§<code>performance.getEntriesByType()</code>ã®å¼•æ•°ã«æŒ‡å®šã—ã¦ããŸæ–‡å­—åˆ—ã‚’å–ã‚Šã†ã‚‹ã€‚</p><p>ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ¯ã«<code>PerformanceObserver</code>ã‚’åˆ†ã‘ã‚‹ãªã©ã®ä½¿ã„æ–¹ã‚‚å¯èƒ½ã ã‚ã†ã€‚</p><aside class=share><button type=button id=share-button>ğŸ”— ã“ã®è¨˜äº‹ã‚’ã‚·ã‚§ã‚¢ã™ã‚‹</button>
<a href=https://github.com/1000ch/1000ch.net/edit/main/content/posts/2016/performance-api/index.md>ğŸ”— ã“ã®è¨˜äº‹ã‚’ GitHub ã§ç·¨é›†ã™ã‚‹</a></aside><div popover=auto id=popover>ã‚¿ã‚¤ãƒˆãƒ«ã¨ URL ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ</div><nav class=pager><div><a href=/posts/2016/nu-rain/>ğŸ‘ˆ è¶…æ’¥æ°´å‚˜ã€ŒNu-Rainï¼ˆãƒŒãƒ¬ã‚¤ãƒ³ï¼‰ã€</a></div><div><a href=/posts/2016/social-button/>ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒœã‚¿ãƒ³ã®Web Components ğŸ‘‰</a></div></nav></main><aside class=aside></aside><footer class=footer><h2>Preference</h2><div class=preference><label><input type=checkbox switch id=auto-phrase> æ—¥æœ¬èªã®ãƒ•ãƒ¬ãƒ¼ã‚ºæ”¹è¡Œ
</label><label><input type=checkbox switch id=dark-mode> ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰</label></div><h2>Notice</h2><ul class=notice><li>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æ­£ç¢ºæ€§ã‚„ä¿¡é ¼æ€§ã«ã¯é…æ…®ã—ã¦ã„ã¾ã™ãŒã€å¿…ãšã—ã‚‚ãã‚Œã‚‰ã‚’ä¿è¨¼ã¯ã—ã¾ã›ã‚“ã€‚æ„è¦‹ã‚„è¦‹è§£ã¯ã€å€‹äººã®ç«‹å ´ã«ãŠã„ã¦è¿°ã¹ãŸã‚‚ã®ã§ã‚ã‚Šã€æ‰€å±çµ„ç¹”ç­‰ã‚’ä»£è¡¨ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ©ç”¨ãŠã‚ˆã³ãã®çµæœã«å¯¾ã—ã€ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã‹ã­ã¾ã™</li><li>å½“ã‚µã‚¤ãƒˆã¯ amazon.co.jp ã‚’å®£ä¼ã—ãƒªãƒ³ã‚¯ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€ã‚µã‚¤ãƒˆãŒç´¹ä»‹æ–™ã‚’ç²å¾—ã§ãã‚‹æ‰‹æ®µã‚’æä¾›ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã«è¨­å®šã•ã‚ŒãŸã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆå®£ä¼ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã‚ã‚‹ã€Amazon ã‚¢ã‚½ã‚·ã‚¨ã‚¤ãƒˆãƒ»ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å‚åŠ è€…ã§ã™</li></ul></footer></div><script defer src=https://platform.twitter.com/widgets.js></script><script defer src=https://platform.instagram.com/en_US/embeds.js></script><script defer src=https://strava-embeds.com/embed.js></script><script defer src=https://embed.bsky.app/static/embed.js></script><script type=module src=https://unpkg.com/baseline-status@1.0.4/baseline-status.min.js></script><script type=module>
import hljs from 'https://unpkg.com/@highlightjs/cdn-assets@11.9.0/es/highlight.min.js';

document.querySelectorAll('pre code').forEach(block => {
  hljs.highlightBlock(block);
});
</script><script type=module>
import AffiliateLink from '/js/affiliate-link.js';

customElements.define('affiliate-link', AffiliateLink);

const autoPhrase = document.querySelector('#auto-phrase');
const darkMode =  document.querySelector('#dark-mode');
autoPhrase.checked = localStorage.getItem('auto-phrase');
darkMode.checked = localStorage.getItem('dark-mode');

autoPhrase?.addEventListener('change', event => {
  if (event.target.checked) {
    localStorage.setItem('auto-phrase', true);
  } else {
    localStorage.removeItem('auto-phrase');
  }
});

darkMode?.addEventListener('change', event => {
  if (event.target.checked) {
    localStorage.setItem('dark-mode', true);
  } else {
    localStorage.removeItem('dark-mode');
  }
});

const shareButton = document.querySelector('.share button');
shareButton?.addEventListener('click', async event => {
  event.preventDefault();

  const data = {
    title: document.title,
    text: document.title,
    url: location.href
  };

  if (navigator.canShare?.(data)) {
    await navigator.share(data);
  } else {
    await navigator.clipboard?.writeText(`${data.title} ${data.url}`);
    const popover = document.querySelector('#Popover');
    popover.showPopover();

    setTimeout(() => {
      popover.hidePopover();
    }, 2000);
  }
});
</script></body></html>