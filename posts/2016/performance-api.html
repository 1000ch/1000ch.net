<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ã™ã‚‹å„ç¨®ãƒ–ãƒ©ã‚¦ã‚¶API - EagleLand</title><link rel=icon href=/favicon.png><link rel="shortcut icon" href=/favicon.png><link rel="shortcut icon" href=/favicon.svg type=image/svg+xml sizes=any><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.2/build/styles/dracula.min.css><link rel=stylesheet href=/css/font.css><link rel=stylesheet href=/css/settings.css><link rel=stylesheet href=/css/tools.css><link rel=stylesheet href=/css/generic.css><link rel=stylesheet href=/css/base.css><link rel=stylesheet href=/css/objects.css><link rel=stylesheet href=/css/components.css><link rel=stylesheet href=/css/trumps.css><link rel=alternate href=/rss.xml title=1000ch.net type=application/rss+xml><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto+Mono"><meta name=author content="Shogo Sensui"><meta name=copyright content="Copyright (c) Shogo Sensui; Licensed under Creative Commons Attribution-Noncommercial-Share Japan"><meta property="og:description" content="ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ã™ã‚‹å„ç¨®ãƒ–ãƒ©ã‚¦ã‚¶API â—¯â—¯ Timing APIã¯W3Cã®Web Performance Working Groupã®Ilya Grigorikã‚’ä¸­å¿ƒã«ç­–å®šãŒé€²ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹ãƒ–ãƒ©ã‚¦ã‚¶APIã§ã‚ã‚‹ã€‚
 User Timing API: ä»»æ„ã®ãƒ©ãƒ™ãƒ«ã‚’ç”¨ã„ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Ÿè¡Œã«ã‹ã‹ã£ãŸã‚’å–å¾—ã™ã‚‹ Navigation Timing API: ãƒ–ãƒ©ã‚¦ã‚¶ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ç™ºç”Ÿã—ãŸæ™‚é–“ã‚’å–å¾—ã™ã‚‹ Resource Timing API: ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ­ãƒ¼ãƒ‰ã«éš›ã—ã¦ç™ºç”Ÿã—ãŸå„ç¨®æ™‚é–“ã‚’å–å¾—ã™ã‚‹ Frame Timing API: ãƒ–ãƒ©ã‚¦ã‚¶ãƒ•ãƒ¬ãƒ¼ãƒ ã®å†…è¨³ã‚’å–å¾—ã™ã‚‹ Server Timing API: ã‚µãƒ¼ãƒãƒ¼å‡¦ç†ã®å†…è¨³ã‚’å–å¾—ã™ã‚‹ High Resolution Time API: é«˜ç²¾åº¦ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’æä¾›ã™ã‚‹  ãƒ–ãƒ©ã‚¦ã‚¶ã®windowã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«performanceã¨ã„ã†ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã‚‹ã®ã§ã€DevToolsã‚’é–‹ã„ã¦Consoleãƒ‘ãƒãƒ«ã§window.performanceã¨å…¥åŠ›ã™ã‚‹ã¨ã€ä½•ã‚„ã‚‰è¦‹è¦šãˆã®ã‚ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«æ•°å€¤ãŒå…¥ã£ã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚‹ã€‚
ãªã‹ã§ã‚‚Frame Timingã¨Server Timingã¯è‹¥ãã€ãƒ–ãƒ©ã‚¦ã‚¶ã«å®Ÿé¨“çš„å®Ÿè£…ã¯ãŠã‚ã‹ã‚¹ãƒšãƒƒã‚¯ã«é–¢ã™ã‚‹è³‡æ–™ã‚‚å°‘ãªã„ã€‚ã“ã“ã§è¨˜è¼‰ã—ã¦ã„ã‚‹å†…å®¹ã¯ã“ã‚Œã‹ã‚‰å¤‰ã‚ã‚‹å¯èƒ½æ€§ã¯é«˜ã„ã®ã§ã”æ³¨æ„ã‚’ã€‚
User Timing API User Timing APIã¯ã€performance.mark()ã¨performance.measure()ã§ä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹APIã€‚performance.mark()ã§ä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ãƒãƒ¼ã‚¯ã‚’ã—ã€performance.measure()ã§ãƒãƒ¼ã‚¯é–“ã®å·®åˆ†ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ãªä½¿ã„æ–¹ã€‚
ä»¥ä¸‹ã¯XMLHttpRequestã«ã‚ˆã‚‹éåŒæœŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹ä¾‹ã€‚performance.mark()ã‚„performance.measure()ã—ãŸãƒ‡ãƒ¼ã‚¿ã¯ã€performance.getEntriesByType('mark')ã®ã‚ˆã†ã«è¨ˆæ¸¬ã‚¿ã‚¤ãƒ—ã‚’æŒ‡å®šã—ã¦å–å¾—å¯èƒ½ã«ãªã£ã¦ã„ã‚‹ã€‚
let xhr = new XMLHttpRequest(); xhr.open('GET', '/', true); xhr.onload = e => { performance.mark('mark-xhr-end'); performance.measure('xhr-start-end', 'mark-xhr-start', 'mark-xhr-end'); console.log(performance.getEntriesByType('mark')); console.log(performance.getEntriesByType('measure')); }; performance.mark('mark-xhr-start'); xhr.send(); ä»¥å‰ã¾ã§ã¯DevToolsã®Timelineãƒ‘ãƒãƒ«ã«ã“ã®ãƒãƒ¼ã‚¯ã—ãŸæƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ãŸãŒã€53å‘¨è¾ºã§ã¯æ¶ˆãˆã¦ã„ã‚‹æ°—ãŒã™ã‚‹ã€‚Canaryã ã‹ã‚‰ã‹ã‚‚ã—ã‚Œãªã„ã‘ã©ã€‚
Navigation Timing API Navigation Timing APIã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰å®Œäº†ã¾ã§ã®DOMContentLoadedã‚„loadã®ã‚ˆã†ãªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹APIã€‚"><meta property="og:image" content="https://1000ch.net/img/apple-touch-icon.png"><meta name=twitter:card content="summary"><meta property="og:type" content="article"><meta property="og:url" content="https://1000ch.net/posts/2016/performance-api.html"><meta property="og:site_name" content="EagleLand"><meta property="og:title" content="ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ã™ã‚‹å„ç¨®ãƒ–ãƒ©ã‚¦ã‚¶API"><meta name=twitter:site content="@1000ch"><meta name=twitter:url content="https://1000ch.net/posts/2016/performance-api.html"><meta name=twitter:title content="ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ã™ã‚‹å„ç¨®ãƒ–ãƒ©ã‚¦ã‚¶API"><meta name=google-site-verification content="BWewniqiBzRmrhpj51eLwug-F4hamFfyznl-ARb-Y4Y"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed sizes=114x114 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed sizes=72x72 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49530352-1','1000ch.net');ga('send','pageview');</script></head><body><div class=Container><header class=Header><h1 class=Header__Title><a href=/>EagleLand</a></h1><nav class=Header__Menu><div class=Header__MenuItem><img src=/img/rss.svg alt>
<a href=/rss.xml>RSS</a></div><div class=Header__MenuItem><img src=/img/heart.svg alt>
<a href=https://shogosensui.com>Activity</a></div><div class=Header__MenuItem><img src=/img/facebook.svg alt>
<a href=https://www.facebook.com/1000ch.net>Facebook</a></div></nav></header><main class=Main><span class="Label Label--gray pull-left">2016.06.14</span><h1 id=ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ã™ã‚‹å„ç¨®ãƒ–ãƒ©ã‚¦ã‚¶api>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ã™ã‚‹å„ç¨®ãƒ–ãƒ©ã‚¦ã‚¶API</h1><p>â—¯â—¯ Timing APIã¯W3Cã®Web Performance Working Groupã®Ilya Grigorikã‚’ä¸­å¿ƒã«ç­–å®šãŒé€²ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹ãƒ–ãƒ©ã‚¦ã‚¶APIã§ã‚ã‚‹ã€‚</p><ul><li><a href=http://w3c.github.io/user-timing/>User Timing API</a>: ä»»æ„ã®ãƒ©ãƒ™ãƒ«ã‚’ç”¨ã„ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Ÿè¡Œã«ã‹ã‹ã£ãŸã‚’å–å¾—ã™ã‚‹</li><li><a href=http://w3c.github.io/navigation-timing/>Navigation Timing API</a>: ãƒ–ãƒ©ã‚¦ã‚¶ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ç™ºç”Ÿã—ãŸæ™‚é–“ã‚’å–å¾—ã™ã‚‹</li><li><a href=http://w3c.github.io/resource-timing/>Resource Timing API</a>: ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ­ãƒ¼ãƒ‰ã«éš›ã—ã¦ç™ºç”Ÿã—ãŸå„ç¨®æ™‚é–“ã‚’å–å¾—ã™ã‚‹</li><li><a href=http://w3c.github.io/frame-timing/>Frame Timing API</a>: ãƒ–ãƒ©ã‚¦ã‚¶ãƒ•ãƒ¬ãƒ¼ãƒ ã®å†…è¨³ã‚’å–å¾—ã™ã‚‹</li><li><a href=https://w3c.github.io/server-timing/>Server Timing API</a>: ã‚µãƒ¼ãƒãƒ¼å‡¦ç†ã®å†…è¨³ã‚’å–å¾—ã™ã‚‹</li><li><a href=http://w3c.github.io/hr-time/>High Resolution Time API</a>: é«˜ç²¾åº¦ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’æä¾›ã™ã‚‹</li></ul><p>ãƒ–ãƒ©ã‚¦ã‚¶ã®<code>window</code>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«<code>performance</code>ã¨ã„ã†ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã‚‹ã®ã§ã€DevToolsã‚’é–‹ã„ã¦Consoleãƒ‘ãƒãƒ«ã§<code>window.performance</code>ã¨å…¥åŠ›ã™ã‚‹ã¨ã€ä½•ã‚„ã‚‰è¦‹è¦šãˆã®ã‚ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«æ•°å€¤ãŒå…¥ã£ã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚‹ã€‚</p><p>ãªã‹ã§ã‚‚Frame Timingã¨Server Timingã¯è‹¥ãã€ãƒ–ãƒ©ã‚¦ã‚¶ã«å®Ÿé¨“çš„å®Ÿè£…ã¯ãŠã‚ã‹ã‚¹ãƒšãƒƒã‚¯ã«é–¢ã™ã‚‹è³‡æ–™ã‚‚å°‘ãªã„ã€‚ã“ã“ã§è¨˜è¼‰ã—ã¦ã„ã‚‹å†…å®¹ã¯ã“ã‚Œã‹ã‚‰å¤‰ã‚ã‚‹å¯èƒ½æ€§ã¯é«˜ã„ã®ã§ã”æ³¨æ„ã‚’ã€‚</p><h2 id=user-timing-api>User Timing API</h2><p><a href=https://w3c.github.io/user-timing/>User Timing API</a>ã¯ã€<code>performance.mark()</code>ã¨<code>performance.measure()</code>ã§ä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹APIã€‚<code>performance.mark()</code>ã§ä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ãƒãƒ¼ã‚¯ã‚’ã—ã€<code>performance.measure()</code>ã§ãƒãƒ¼ã‚¯é–“ã®å·®åˆ†ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ãªä½¿ã„æ–¹ã€‚</p><p>ä»¥ä¸‹ã¯<code>XMLHttpRequest</code>ã«ã‚ˆã‚‹éåŒæœŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹ä¾‹ã€‚<code>performance.mark()</code>ã‚„<code>performance.measure()</code>ã—ãŸãƒ‡ãƒ¼ã‚¿ã¯ã€<code>performance.getEntriesByType('mark')</code>ã®ã‚ˆã†ã«è¨ˆæ¸¬ã‚¿ã‚¤ãƒ—ã‚’æŒ‡å®šã—ã¦å–å¾—å¯èƒ½ã«ãªã£ã¦ã„ã‚‹ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>xhr</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>XMLHttpRequest</span>();
<span style=color:#a6e22e>xhr</span>.<span style=color:#a6e22e>open</span>(<span style=color:#e6db74>&#39;GET&#39;</span>, <span style=color:#e6db74>&#39;/&#39;</span>, <span style=color:#66d9ef>true</span>);
<span style=color:#a6e22e>xhr</span>.<span style=color:#a6e22e>onload</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>e</span> =&gt; {
  <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>mark</span>(<span style=color:#e6db74>&#39;mark-xhr-end&#39;</span>);
  <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>measure</span>(<span style=color:#e6db74>&#39;xhr-start-end&#39;</span>, <span style=color:#e6db74>&#39;mark-xhr-start&#39;</span>, <span style=color:#e6db74>&#39;mark-xhr-end&#39;</span>);
  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>getEntriesByType</span>(<span style=color:#e6db74>&#39;mark&#39;</span>));
  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>getEntriesByType</span>(<span style=color:#e6db74>&#39;measure&#39;</span>));
};
<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>mark</span>(<span style=color:#e6db74>&#39;mark-xhr-start&#39;</span>);
<span style=color:#a6e22e>xhr</span>.<span style=color:#a6e22e>send</span>();
</code></pre></div><p>ä»¥å‰ã¾ã§ã¯DevToolsã®Timelineãƒ‘ãƒãƒ«ã«ã“ã®ãƒãƒ¼ã‚¯ã—ãŸæƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ãŸãŒã€53å‘¨è¾ºã§ã¯æ¶ˆãˆã¦ã„ã‚‹æ°—ãŒã™ã‚‹ã€‚Canaryã ã‹ã‚‰ã‹ã‚‚ã—ã‚Œãªã„ã‘ã©ã€‚</p><h2 id=navigation-timing-api>Navigation Timing API</h2><p><a href=https://w3c.github.io/navigation-timing/>Navigation Timing API</a>ã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰å®Œäº†ã¾ã§ã®<code>DOMContentLoaded</code>ã‚„<code>load</code>ã®ã‚ˆã†ãªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹APIã€‚</p><p><img src=/img/posts/2016/performance-api/processing-model.svg alt="Processing Model"></p><p><code>performance.timing</code>ã‹ã‚‰ä»¥ä¸‹ã®æƒ…å ±ã‚’å–å¾—ã§ãã‚‹ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(
  <span style=color:#e6db74>&#39;Name: &#39;</span>       <span style=color:#f92672>+</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>name</span>      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
  <span style=color:#e6db74>&#39;Entry Type: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>entryType</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
  <span style=color:#e6db74>&#39;Start Time: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>startTime</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
  <span style=color:#e6db74>&#39;Duration: &#39;</span>   <span style=color:#f92672>+</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>duration</span>  <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
  <span style=color:#e6db74>&#39;Unload: &#39;</span>     <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>unloadEventEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>unloadEventStart</span>)   <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
  <span style=color:#e6db74>&#39;Redirect: &#39;</span>   <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>redirectEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>redirectStart</span>)         <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
  <span style=color:#e6db74>&#39;App Cache: &#39;</span>  <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>domainLookupStart</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>fetchStart</span>)      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
  <span style=color:#e6db74>&#39;DNS: &#39;</span>        <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>domainLookupEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>domainLookupStart</span>) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
  <span style=color:#e6db74>&#39;TCP: &#39;</span>        <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>connectEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>connectStart</span>)           <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
  <span style=color:#e6db74>&#39;Request: &#39;</span>    <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>responseStart</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>requestStart</span>)        <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
  <span style=color:#e6db74>&#39;Response: &#39;</span>   <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>responseEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>responseStart</span>)         <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
  <span style=color:#e6db74>&#39;Processing: &#39;</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>loadEventStart</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>responseEnd</span>)        <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
  <span style=color:#e6db74>&#39;Onload: &#39;</span>     <span style=color:#f92672>+</span> (<span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>loadEventEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>timing</span>.<span style=color:#a6e22e>loadEventStart</span>)       <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span>
);
</code></pre></div><p>ã“ã“ã‹ã‚‰<code>PerformanceEntry</code>ãªã©ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«å¯¾å¿œã™ã‚‹Navigation Timing Level 2ã¨ã„ã†ä»•æ§˜ã®ç­–å®šãŒé€²ã‚“ã§ã„ã‚‹ã€‚ã“ã‚Œã¯å¾Œè¿°ã®<code>PerformanceObserver</code>ã«å¿…è¦ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ãªã£ã¦ã„ã‚‹ã€‚</p><p><code>DOMContentLoaded</code>ã‚„<code>load</code>ã€<code>document.readyState</code>ã¨ã®å¯¾å¿œé–¢ä¿‚ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šãã†ã€‚</p><table><thead><tr><th>Browser lifecycle</th><th><code>document.readyState</code></th><th>Navigation Timing API</th></tr></thead><tbody><tr><td></td><td></td><td><code>timing.domLoading</code></td></tr><tr><td></td><td><code>loading</code></td><td></td></tr><tr><td></td><td></td><td><code>timing.domInteractive</code></td></tr><tr><td></td><td><code>interactive</code></td><td></td></tr><tr><td><code>DOMContentLoaded</code></td><td></td><td><code>timing.domContentLoadedEventStart</code></td></tr><tr><td></td><td></td><td><code>timing.domContentLoadedEventEnd</code></td></tr><tr><td></td><td></td><td><code>timing.domComplete</code></td></tr><tr><td></td><td><code>complete</code></td><td></td></tr><tr><td><code>load</code></td><td></td><td><code>timing.loadEvent</code></td></tr></tbody></table><h2 id=resource-timing-api>Resource Timing API</h2><p><a href=https://w3c.github.io/resource-timing/>Resource Timing API</a>ã¯ãƒšãƒ¼ã‚¸å†…ã§ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ã«é–¢ã™ã‚‹æƒ…å ±ã‚’å–å¾—ã™ã‚‹APIã€‚é›‘ã«è¨€ãˆã°Navigation Timing APIã®ã‚µãƒ–ãƒªã‚½ãƒ¼ã‚¹ç‰ˆã€‚</p><p><code>performance.getEntriesByType()</code>ã«<code>resource</code>ã‚’æŒ‡å®šã—ã¦å–å¾—ã™ã‚‹ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>resource</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>getEntriesByType</span>(<span style=color:#e6db74>&#39;resource&#39;</span>)) {
  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(
    <span style=color:#e6db74>&#39;Name: &#39;</span>       <span style=color:#f92672>+</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>name</span>      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Entry Type: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>entryType</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Start Time: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>startTime</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Duration: &#39;</span>   <span style=color:#f92672>+</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>duration</span>  <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Redirect: &#39;</span>   <span style=color:#f92672>+</span> (<span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>redirectEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>redirectStart</span>)         <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;App Cache: &#39;</span>  <span style=color:#f92672>+</span> (<span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>domainLookupStart</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>fetchStart</span>)      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;DNS: &#39;</span>        <span style=color:#f92672>+</span> (<span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>domainLookupEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>domainLookupStart</span>) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;TCP: &#39;</span>        <span style=color:#f92672>+</span> (<span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>connectEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>connectStart</span>)           <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Request: &#39;</span>    <span style=color:#f92672>+</span> (<span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>responseStart</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>requestStart</span>)        <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Response: &#39;</span>   <span style=color:#f92672>+</span> (<span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>responseEnd</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>responseStart</span>)         <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Processing: &#39;</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>loadEventStart</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>resource</span>.<span style=color:#a6e22e>responseEnd</span>)        <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;n&#39;</span>
  );
}
</code></pre></div><h2 id=frame-timing-api>Frame Timing API</h2><p><a href=https://w3c.github.io/frame-timing/>Frame Timing API</a>ã¯ãƒšãƒ¼ã‚¸æç”»ã®ãƒ•ãƒ¬ãƒ¼ãƒ æƒ…å ±ã‚’å–å¾—ã™ã‚‹APIã€‚Navigation Timing APIã‚„Resource Timing APIã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å‡¦ç†ã«é–¢ã™ã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æƒ…å ±ã ãŒã€ã“ã‚Œã¯ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æƒ…å ±ã¨ã„ã†ã“ã¨ã«ãªã‚‹ã€‚</p><p>1ãƒ•ãƒ¬ãƒ¼ãƒ ã¯ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã«ãŠã‘ã‚‹<code>vsync</code>ã‹ã‚‰<code>vsync</code>ã¾ã§ã‚’æŒ‡ã™ã€‚</p><p><img src=/img/posts/2016/performance-api/frame-model.png alt="Frame Model"></p><p><code>performance.getEntriesByType()</code>ã«<code>renderer</code>ãªã„ã—<code>composite</code>ã‚’æŒ‡å®šã—ã¦å–å¾—ã™ã‚‹ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>renderer</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>getEntriesByType</span>(<span style=color:#e6db74>&#39;renderer&#39;</span>)) {
  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(
    <span style=color:#e6db74>&#39;Name: &#39;</span>       <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>name</span>      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Entry Type: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>entryType</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Start Time: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>startTime</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Duration: &#39;</span>   <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>duration</span>  <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span>
  );
}

<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>composite</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>getEntriesByType</span>(<span style=color:#e6db74>&#39;composite&#39;</span>)) {
  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(
    <span style=color:#e6db74>&#39;Name: &#39;</span>       <span style=color:#f92672>+</span> <span style=color:#a6e22e>composite</span>.<span style=color:#a6e22e>name</span>      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Entry Type: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>composite</span>.<span style=color:#a6e22e>entryType</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Start Time: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>composite</span>.<span style=color:#a6e22e>startTime</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Duration: &#39;</span>   <span style=color:#f92672>+</span> <span style=color:#a6e22e>composite</span>.<span style=color:#a6e22e>duration</span>  <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span>
  );
}
</code></pre></div><p><code>renderer</code>ã¯ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã‹ã‚‰Compositorã¸è¡Œã‚ã‚Œã‚‹ã‚³ãƒŸãƒƒãƒˆã€<code>composite</code>ã¯Compositorã‹ã‚‰ã®ãƒ‰ãƒ­ãƒ¼ã‚³ãƒ¼ãƒ«ã«é–¢ã™ã‚‹æƒ…å ±ã§ã‚ã‚‹ã€‚</p><p>ã“ã‚Œã‚‰ã¯å¿…ãšã—ã‚‚å¯¾ã«ã¯ãªã‚‰ãšã€Compositorã‹ã‚‰ã®ãƒ‰ãƒ­ãƒ¼ã‚³ãƒ¼ãƒ«ã¯ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã‹ã‚‰ã®ã‚³ãƒŸãƒƒãƒˆã«ä¾å­˜ã—ãªã„ã€‚ä¾‹ãˆã°ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãªã‚“ã‹ã®æ™‚ã¯ãƒ“ãƒƒãƒˆãƒãƒƒãƒ—ã®å†æ§‹ç¯‰ã‚’ã›ãšãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã¸ã®ãƒ”ã‚¯ã‚»ãƒ«ã‚’é€ã‚Šç›´ã™ã¨ã„ã†ã“ã¨ã ã¨æ€ã‚ã‚Œã‚‹ã€‚ãŸã¶ã‚“ã€‚</p><h2 id=server-timing-api>Server Timing API</h2><p><a href=https://w3c.github.io/server-timing/>Server Timing API</a>ã¯ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ã®<code>Server-Timing</code>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚µãƒ¼ãƒãƒ¼ã®å„å‡¦ç†ã«ã‹ã‹ã£ãŸæ™‚é–“ã‚’å«ã‚ã¦ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ãã‚Œã‚’å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã¨ã„ã†APIã€‚Ilyaã®Gistï¼ˆ<a href=https://gist.github.com/igrigorik/97dfe5ea9b4a85162e25>igrigorik/server-timing.md</a>ï¼‰ãƒ¬ãƒ™ãƒ«ãªã®ã§ã€ã¾ã ã¾ã ä»•æ§˜ã®ç€åœ°ã«ã¯é ãã†ã ãŒã€ä¾¿åˆ©ãã†ã€‚</p><pre><code>HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
Cache-Control: max-age=360, public
Transfer-Encoding: chunked
Server-Timing: db=150; cache=22
</code></pre><p>ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ã®<code>Server-Timing</code>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚Œã°ã€ã“ã®å ´åˆã¯DBã‚¢ã‚¯ã‚»ã‚¹ã«150msã‹ã‹ã‚Šã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å‚ç…§ã«22msã‹ã‹ã£ãŸã¨ã„ã†ã“ã¨ãŒè¡¨ã›ã‚‹ã€‚</p><p><code>performance.getEntriesByType()</code>ã«<code>server</code>ã‚’æŒ‡å®šã—ã¦å–å¾—ã™ã‚‹ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>server</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>performance</span>.<span style=color:#a6e22e>getEntriesByType</span>(<span style=color:#e6db74>&#39;server&#39;</span>)) {
  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(
    <span style=color:#e6db74>&#39;Name: &#39;</span>        <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>name</span>        <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Entry Type: &#39;</span>  <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>entryType</span>   <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Start Time: &#39;</span>  <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>startTime</span>   <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Duration: &#39;</span>    <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>duration</span>    <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Metric: &#39;</span>      <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>metric</span>      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;Description: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>renderer</span>.<span style=color:#a6e22e>description</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span>
  );
}
</code></pre></div><h2 id=high-resolution-time-api>High Resolution Time API</h2><p><a href=https://www.w3.org/TR/hr-time/>High Resolution Time API</a>ã¯ãƒã‚¤ã‚¯ãƒ­ç§’å˜ä½ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹ãŸã‚ã®APIã€‚<code>Date.now()</code>ã®ãƒŸãƒªç§’ã§ã¯ä¸ååˆ†ã¨ã„ã†ã“ã¨ã§ã€ç´°ã‹ãªè¨ˆæ¸¬ã«ã¯<code>performance.now()</code>ã‚’ä½¿ã†ã¨è‰¯ã„ã€‚</p><p><code>performance.now()</code>ãŒè¿”ã™<code>DOMHighResTimeStamp</code>ã¯ã€ã“ã“ã¾ã§ç´¹ä»‹ã—ã¦ããŸå„APIã®æ™‚é–“ã«é–¢ã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã‚‚ä½¿ã‚ã‚Œã¦ã„ã‚‹ã€‚å†…éƒ¨çš„ã«ã¯ãŸã ã®<code>double</code>ã§ã‚ã‚‹ã€‚</p><h2 id=performance-observer>Performance Observer</h2><p>ãƒ–ãƒ©ã‚¦ã‚¶ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¨ˆæ¸¬ã™ã‚‹APIã¯å…ˆã«æŒ™ã’ãŸã€User Timing APIãƒ»Navigation Timing APIãƒ»Resource Timing APIãƒ»Frame Timing APIãƒ»Server Timing APIã®5ã¤ãŒã‚ã‚‹ã€‚<a href=https://w3c.github.io/performance-timeline/>Performance Observer</a>ã¯ã“ã‚Œã‚‰ã®å¤‰æ›´ã‚’ç›£è¦–ã™ã‚‹APIã§ã‚ã‚‹ã€‚</p><p><code>PerformanceObserver</code>ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã‚Šã€ç›£è¦–é–‹å§‹ã«ã¯<code>observe()</code>ã€çµ‚äº†ã«ã¯<code>disconnect()</code>ã‚’å®Ÿè¡Œã™ã‚‹ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>observer</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>PerformanceObserver</span>(<span style=color:#a6e22e>list</span> =&gt; {
  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>entry</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>list</span>.<span style=color:#a6e22e>getEntries</span>()) {
    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(
      <span style=color:#e6db74>&#39;Name: &#39;</span>       <span style=color:#f92672>+</span> <span style=color:#a6e22e>entry</span>.<span style=color:#a6e22e>name</span>      <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
      <span style=color:#e6db74>&#39;Entry Type: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>entry</span>.<span style=color:#a6e22e>entryType</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
      <span style=color:#e6db74>&#39;Start Time: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>entry</span>.<span style=color:#a6e22e>startTime</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#f92672>+</span>
      <span style=color:#e6db74>&#39;Duration: &#39;</span>   <span style=color:#f92672>+</span> <span style=color:#a6e22e>entry</span>.<span style=color:#a6e22e>duration</span>  <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\n&#39;</span>
    );
  }
});

<span style=color:#a6e22e>observer</span>.<span style=color:#a6e22e>observe</span>({
  <span style=color:#a6e22e>entryTypes</span> <span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;resource&#39;</span>]
});

<span style=color:#a6e22e>observer</span>.<span style=color:#a6e22e>disconnect</span>();
</code></pre></div><p><code>observe()</code>ã®å¼•æ•°ã«ã¯ã©ã®ç¨®é¡ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ç›£è¦–ã™ã‚‹ã‹ã‚’æŒ‡å®šã—ã¦ã‚ã’ã‚‹ã€‚ã“ã“ã§ã¯Resource Timing APIã§å–å¾—ã™ã‚‹å€¤ã‚’ç›£è¦–ã™ã‚‹ã¹ã<code>resource</code>ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ãŒã€ã“ã“ã¾ã§<code>performance.getEntriesByType()</code>ã®å¼•æ•°ã«æŒ‡å®šã—ã¦ããŸæ–‡å­—åˆ—ã‚’å–ã‚Šã†ã‚‹ã€‚</p><p>ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ¯ã«<code>PerformanceObserver</code>ã‚’åˆ†ã‘ã‚‹ãªã©ã®ä½¿ã„æ–¹ã‚‚å¯èƒ½ã ã‚ã†ã€‚</p><aside class=Share><div class=Share__Item><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2f1000ch.net%2fposts%2f2016%2fperformance-api.html" title="Share on Facebook" target=_blank><img src=/img/facebook.svg></a></div><div class=Share__Item><a href="https://twitter.com/share?url=https%3a%2f%2f1000ch.net%2fposts%2f2016%2fperformance-api.html&text=%e3%83%91%e3%83%95%e3%82%a9%e3%83%bc%e3%83%9e%e3%83%b3%e3%82%b9%e3%81%ab%e9%96%a2%e3%81%99%e3%82%8b%e5%90%84%e7%a8%ae%e3%83%96%e3%83%a9%e3%82%a6%e3%82%b6API" title="Share on Twitter" target=_blank><img src=/img/twitter.svg></a></div></aside><nav class=Pager><div class="Pager__Item Pager__Item--left"><a href=/posts/2016/nu-rain.html>ğŸ‘ˆ è¶…æ’¥æ°´å‚˜ã€ŒNu-Rainï¼ˆãƒŒãƒ¬ã‚¤ãƒ³ï¼‰ã€</a></div><div class="Pager__Item Pager__Item--right"><a href=/posts/2016/social-button.html>ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒœã‚¿ãƒ³ã®Web Components ğŸ‘‰</a></div></nav></main><aside class=Aside><h1>Author</h1><div class=Media><picture>
<source srcset=/img/1000ch.avif type=image/avif><img class=Media__Figure src=/img/1000ch.jpg alt></picture><div class=Media__Body><h3 class=Media__Title>1000ch <a href=https://twitter.com/1000ch class=twitter-follow-button data-show-count=false data-show-screen-name=false>Follow @1000ch</a></h3><p>Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã‚’å°‚é–€ã¨ã™ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€‚ä¼æ¥­ã§åƒãå‚ã‚‰ã€æŠ€è¡“é¡§å•ã¨ã—ã¦è¤‡æ•°ä¼æ¥­ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã«é–¢ã‚ã‚Šã€é«˜å“è³ªã§ç¶­æŒã—ã‚„ã™ã„ Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹ãŸã‚ã®æ´»å‹•ã‚’ç¶šã‘ã¦ã„ã‚‹ã€‚</p></div></div></aside><footer class=Footer><div class=Banner><div class=Banner__Item><a href=https://creativecommons.org/licenses/by-nc-nd/4.0/deed.ja target=_blank><img src=/img/by-nc-nd.png alt="CC BY-NC-ND 4.0" width=80 height=28></a></div><div class=Banner__Item><form action=https://duckduckgo.com/ role=search><input name=sites type=hidden value=1000ch.net>
<input name=q type=search>
<input type=submit value=Search></form></div></div></footer></div><script defer src=https://platform.twitter.com/widgets.js></script><script defer src=https://platform.instagram.com/en_US/embeds.js></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.2/build/highlight.min.js></script><script type=module>
import AffiliateLink from '/js/affiliate-link.js';
import FluidIframe from 'https://cdn.jsdelivr.net/npm/fluid-iframe/dist/index.js';

customElements.define('affiliate-link', AffiliateLink);
customElements.define('fluid-iframe', FluidIframe);

document.querySelectorAll('pre code').forEach(block => {
  hljs.highlightBlock(block);
});

if (navigator.serviceWorker) {
  navigator.serviceWorker.register('/sw.js');
}
</script></body></html>