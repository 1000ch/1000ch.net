<!doctype html><html lang=ja>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>JSConf.Asia 2014 1日目 - EagleLand</title>
<link rel=icon href=/favicon.png>
<link rel="shortcut icon" href=/favicon.png>
<link rel="shortcut icon" href=/favicon.svg type=image/svg+xml sizes=any>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css>
<link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.2/build/styles/dracula.min.css>
<link rel=stylesheet href=/css/settings.css>
<link rel=stylesheet href=/css/tools.css>
<link rel=stylesheet href=/css/generic.css>
<link rel=stylesheet href=/css/base.css>
<link rel=stylesheet href=/css/objects.css>
<link rel=stylesheet href=/css/components.css>
<link rel=stylesheet href=/css/trumps.css>
<link rel=alternate href=/rss.xml title=1000ch.net type=application/rss+xml>
<meta name=author content="Shogo Sensui">
<meta name=copyright content="Copyright (c) Shogo Sensui; Licensed under Creative Commons Attribution-Noncommercial-Share Japan">
<meta property="og:description" content="JSConf.Asia 2014 1日目 今日はRegistrationも無いので、7:30にホテルを出る。
 #jsconfasia
A photo posted by 1000ch (@1000ch) on Nov 11, 2014 at 4:22pm PST
 昨日のCSSConfより参加者が多いようで、席が2割増。OctcatのBracketsを使ってラテを体に注入した。
Building Isomorphic Apps by @spikebrehm AirbnbのSpike Brehmのセッション。英語聞き取りやすい気がした。
 JavaScriptはブラウザ環境でもNode.js環境でも実行される。だからこそIsomorphicにするべき フロントエンドの比重は大きくなっているが、SPAなどで極端にクライアントに処理を寄せてしまうとパフォーマンスに影響する  1.Download skelton HTML 2.Download JavaScript 3.Evaluate JavaScript 4.Fetch data from API 5.User sees content   従来のように、HTMLをサーバー側で構築して返却する場合はやはり手順が少ない  1.Download fill HTML 2.User sees content   パフォーマンスはもちろん、SEO的にも、うまく組み合わせたい。  Flickerはmojitoで、Instagramはreactとdjangoで実現しているらしい。 AirbnbのモバイルWebはBackboneとExpressで作った自家製ライブラリらしい。 ASANA - クライアントとサーバーで同期されているランタイムらしい。Meteorも同じ類のアプローチ？   これらの実現のために、環境の差異を吸収する。”Enviroment agnostic & Shimmed per environment”  例えばCookieの抽象化は、cookie + Browserifyで良いのでは？ リクエストであればvisionmedia/superagentとか。 webpackを使ったアプローチも、InstagramやFacebook、Yahooで使われている。   どうやってshimmed-per-environmentなモジュールをつくるのか？  package.">
<meta property="og:image" content="https://1000ch.net/img/apple-touch-icon.png">
<meta name=twitter:card content="summary">
<meta property="og:type" content="article">
<meta property="og:url" content="https://1000ch.net/posts/2014/jsconf-asia-2014-1st.html">
<meta property="og:site_name" content="EagleLand">
<meta property="og:title" content="JSConf.Asia 2014 1日目">
<meta name=twitter:site content="@1000ch">
<meta name=twitter:url content="https://1000ch.net/posts/2014/jsconf-asia-2014-1st.html">
<meta name=twitter:title content="JSConf.Asia 2014 1日目">
<meta name=google-site-verification content="BWewniqiBzRmrhpj51eLwug-F4hamFfyznl-ARb-Y4Y">
<link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon.png>
<link rel=apple-touch-icon-precomposed sizes=114x114 href=/img/apple-touch-icon.png>
<link rel=apple-touch-icon-precomposed sizes=72x72 href=/img/apple-touch-icon.png>
<link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png>
<script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-49530352-1','1000ch.net'),ga('send','pageview')</script>
</head>
<body>
<div class=Container>
<header class=Header>
<h1 class=Header__Title>
<a href=/>EagleLand</a>
</h1>
<nav class=Header__Menu>
<div class=Header__MenuItem>
<a href=/rss.xml>📻 RSS</a>
</div>
<div class=Header__MenuItem>
<a href="https://www.google.co.jp/search?q=site%3A1000ch.net">🔍 検索</a>
</div>
<div class=Header__MenuItem>
<a href=https://shogosensui.com>🌎 Who is 1000ch</a>
</div>
</nav>
</header>
<main class=Main>
<span class="Label Label--gray pull-left">2014.11.20</span>
<label>
<input type=checkbox switch id=auto-phrase> 日本語のフレーズ改行
</label>
<h1 id=jsconfasia-2014-1日目>JSConf.Asia 2014 1日目</h1>
<p>今日はRegistrationも無いので、7:30にホテルを出る。</p>
<blockquote class=instagram-media data-instgrm-captioned data-instgrm-version=4 style="background:#fff;border:0;border-radius:3px;box-shadow:0 0 1px rgba(0,0,0,.5),0 1px 10px rgba(0,0,0,.15);margin:1px;max-width:658px;padding:0;width:99.375%;width:-webkit-calc(100% - 2px);width:calc(100% - 2px)"><div style=padding:8px> <div style="background:#f8f8f8;line-height:0;margin-top:40px;padding:50% 0;text-align:center;width:100%"> <div style="background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAAGFBMVEUiIiI9PT0eHh4gIB4hIBkcHBwcHBwcHBydr+JQAAAACHRSTlMABA4YHyQsM5jtaMwAAADfSURBVDjL7ZVBEgMhCAQBAf//42xcNbpAqakcM0ftUmFAAIBE81IqBJdS3lS6zs3bIpB9WED3YYXFPmHRfT8sgyrCP1x8uEUxLMzNWElFOYCV6mHWWwMzdPEKHlhLw7NWJqkHc4uIZphavDzA2JPzUDsBZziNae2S6owH8xPmX8G7zzgKEOPUoYHvGz1TBCxMkd3kwNVbU0gKHkx+iZILf77IofhrY1nYFnB/lQPb79drWOyJVa/DAvg9B/rLB4cC+Nqgdz/TvBbBnr6GBReqn/nRmDgaQEej7WhonozjF+Y2I/fZou/qAAAAAElFTkSuQmCC);display:block;height:44px;margin:0 auto -44px;position:relative;top:-22px;width:44px"></div></div> <p style="margin:8px 0 0;padding:0 4px"> <a href=https://instagram.com/p/vmew1DhpxN/ style=color:#000;font-family:Arial,sans-serif;font-size:14px;font-style:normal;font-weight:400;line-height:17px;text-decoration:none;word-wrap:break-word target=_top>#jsconfasia</a></p> <p style="color:#c9c8cd;font-family:Arial,sans-serif;font-size:14px;line-height:17px;margin-bottom:0;margin-top:8px;overflow:hidden;padding:8px 0 7px;text-align:center;text-overflow:ellipsis;white-space:nowrap">A photo posted by 1000ch (@1000ch) on <time style=font-family:Arial,sans-serif;font-size:14px;line-height:17px datetime=2014-11-20T00:22:30+00:00>Nov 11, 2014 at 4:22pm PST</time></p></div></blockquote>
<p>昨日のCSSConfより参加者が多いようで、席が2割増。OctcatのBracketsを使ってラテを体に注入した。</p>
<h2 id=building-isomorphic-appshttpwwwslidesharenetspikebrehmbuilding-isomorphic-apps-jsconfasia-2014-by-spikebrehmhttpstwittercomspikebrehm><a href=http://www.slideshare.net/spikebrehm/building-isomorphic-apps-jsconfasia-2014>Building Isomorphic Apps</a> by <a href=https://twitter.com/spikebrehm>@spikebrehm</a></h2>
<p>Airbnbの<a href=http://twitter.com/spikebrehm>Spike Brehm</a>のセッション。英語聞き取りやすい気がした。</p>
<ul>
<li>JavaScriptはブラウザ環境でもNode.js環境でも実行される。だからこそIsomorphicにするべき</li>
<li>フロントエンドの比重は大きくなっているが、SPAなどで極端にクライアントに処理を寄せてしまうとパフォーマンスに影響する
<ul>
<li>1.Download skelton HTML</li>
<li>2.Download JavaScript</li>
<li>3.Evaluate JavaScript</li>
<li>4.Fetch data from API</li>
<li>5.User sees content</li>
</ul>
</li>
<li>従来のように、HTMLをサーバー側で構築して返却する場合はやはり手順が少ない
<ul>
<li>1.Download fill HTML</li>
<li>2.User sees content</li>
</ul>
</li>
<li>パフォーマンスはもちろん、SEO的にも、うまく組み合わせたい。
<ul>
<li>Flickerは<a href=https://github.com/yahoo/mojito>mojito</a>で、Instagramは<a href=https://github.com/facebook/react>react</a>と<a href=https://github.com/django/django>django</a>で実現しているらしい。</li>
<li>AirbnbのモバイルWebはBackboneとExpressで作った自家製ライブラリらしい。</li>
<li><a href=https://github.com/Asana>ASANA</a> - クライアントとサーバーで同期されているランタイムらしい。Meteorも同じ類のアプローチ？</li>
</ul>
</li>
<li>これらの実現のために、環境の差異を吸収する。”Enviroment agnostic & Shimmed per environment”
<ul>
<li>例えばCookieの抽象化は、<a href=https://github.com/jshttp/cookie>cookie</a> + Browserifyで良いのでは？</li>
<li>リクエストであれば<a href=https://github.com/visionmedia/superagent>visionmedia/superagent</a>とか。</li>
<li>webpackを使ったアプローチも、InstagramやFacebook、Yahooで使われている。</li>
</ul>
</li>
<li>どうやってshimmed-per-environmentなモジュールをつくるのか？
<ul>
<li><code>package.json</code>の<code>browser</code>属性を使おう</li>
<li><a href=https://github.com/spikebrehm/set-cookie>https://github.com/spikebrehm/set-cookie</a></li>
<li><a href=https://github.com/facebook/react>facebook/react</a></li>
<li><a href=https://github.com/yahoo/flux-examples>yahoo/flux-examples</a></li>
<li><a href=https://www.meteor.com/blog/2014/08/28/isobuild-why-meteor-created-a-new-package-system>Isobuild: why Meteor created a new package system</a></li>
</ul>
</li>
</ul>
<h2 id=pixel-art-and-complex-systems-by-vinceallenvincehttpstwittercomvinceallenvince>Pixel Art and Complex Systems by <a href=https://twitter.com/vinceallenvince>@vinceallenvince</a></h2>
<p>自然にある複雑な事象をピクセルで抽象化したらどうなるかのような話だった。気がする。デモがどれも凄い。</p>
<ul>
<li><a href=http://vinceallenvince.github.io/jsasia2014/>http://vinceallenvince.github.io/jsasia2014/</a></li>
<li><a href=http://www.bitshadowmachine.com/>http://www.bitshadowmachine.com/</a></li>
</ul>
<blockquote class=twitter-tweet lang=ja><p>Pixel Art & Complex Systems by <a href=https://twitter.com/vinceallenvince>@vinceallenvince</a> <a href="https://twitter.com/hashtag/jsconfasia?src=hash">#jsconfasia</a> <a href=http://t.co/FDcilWKzTg>pic.twitter.com/FDcilWKzTg</a></p>&mdash; 1000ch (@1000ch_en) <a href=https://twitter.com/1000ch_en/status/535466005573545984>2014, 11月 20</a></blockquote>
<h2 id=fun-with-sensorshttpwwwslidesharenetjanjongboomfun-with-sensors-jsconfasia-2014-by-janjongboomhttpstwittercomjanjongboom><a href=http://www.slideshare.net/janjongboom/fun-with-sensors-jsconfasia-2014>Fun with sensors</a> by <a href=https://twitter.com/janjongboom>@janjongboom</a></h2>
<p>面白かった。凄くしゃべり慣れている感じ。Firefox OS中心の話。</p>
<ul>
<li>モバイルデバイスに対する入力の方法は限られていたが、センサーの進化によって、今では色んな可能性がある。
<ul>
<li>輝度・湿気・磁力・カメラ・バッテリー・圧力等…</li>
</ul>
</li>
<li>これらのセンサーを組み合わせたらアプリケーションの幅が広がる
<ul>
<li>電波が悪くなったらオフラインモードに切り替える（<code>navigator.mozWifiManager</code>）</li>
<li>暗くなったら音量を下げる（<code>window.addEventListener('devicelight')</code> + <code>AudioContext</code>）</li>
</ul>
</li>
<li>Firefox OSのアーキテクチャ
<ul>
<li>Linux Kernel > Gecko > HTML5 UI</li>
<li>このGeckoの部分にJSからセンサーにアクセスするAPIが集約されている</li>
</ul>
</li>
</ul>
<blockquote class=twitter-tweet lang=ja><p>Fun with JavaScript and Sensors by <a href=https://twitter.com/janjongboom>@janjongboom</a> <a href="https://twitter.com/hashtag/jsconfasia?src=hash">#jsconfasia</a> <a href=http://t.co/uzgJDvrPbI>pic.twitter.com/uzgJDvrPbI</a></p>&mdash; 1000ch (@1000ch) <a href=https://twitter.com/1000ch/status/535311304526163968>2014, 11月 20</a></blockquote>
<h2 id=the-art-of-lesshttpsspeakerdeckcomaemkeithe-art-of-less-jsconf-dot-asia-by-aemkeihttpstwittercomaemkei><a href=https://speakerdeck.com/aemkei/the-art-of-less-jsconf-dot-asia>The Art of Less</a> by <a href=https://twitter.com/aemkei>@aemkei</a></h2>
<p>このセッションが今日のベストバウトかもしれない。プレゼンも鮮やかだったし、内容のエグさも良かった。</p>
<ul>
<li><a href=http://aem1k.com/>http://aem1k.com/</a></li>
</ul>
<p>恐らく、後日ビデオで公開されると思うのでJavaScript好きな人に見て欲しい。 <a href=http://aem1k.com/>http://aem1k.com/</a> に置いてあるブツが好きなら見て損はないと思う。</p>
<iframe loading=lazy class="dropshadow speakerdeck-iframe" src=https://speakerdeck.com/player/178c76b068ca013133ba7691c1dda2be title="Browser Computing Structure" allowfullscreen style=aspect-ratio:560/420 data-ratio=1.3333333333333333></iframe>
<h2 id=preparing-your-nodejs-application-for-scale-by-dexter-tan--laurence-franslay>Preparing Your NodeJS Application for Scale by Dexter Tan & Laurence Franslay</h2>
<ul>
<li>expressにはデフォルトだとセキュリティ的な機能はないので<a href=https://github.com/krakenjs/lusca>Lusca</a>か<a href=https://github.com/helmetjs/helmet>Helmet</a>を使うとだいぶ良くなる。</li>
<li>使っていないモジュールは削除し、使っているならこまめに更新する。そして依存関係を無闇に作らないことも大事
<ul>
<li><a href=https://github.com/nodesecurity/grunt-nsp-package>grunt-nsp-package</a>でモジュールの脆弱性を調べる</li>
<li><a href=http://bekk.github.io/retire.js/>retire.js</a>で古くなったモジュールを調べる。Gruntは<a href=https://github.com/bekk/grunt-retire>grunt-retire</a></li>
</ul>
</li>
<li>XSS対策として、基本的にincomingなものもoutgoingなものもエスケープする</li>
</ul>
<p>あと、ローカライズとかパフォーマンスの話もあった。</p>
<h2 id=jsconfasia2014でプレゼンした>JSConf.Asia 2014でプレゼンした</h2>
<p><a href=https://jsconfasia.wufoo.com/forms/your-5-minutes-of-fame/>Your 5 minutes of fame</a>というメインセッション外の枠で、おぼつかない英語をかましてきた。</p>
<blockquote class=twitter-tweet lang=ja><p><a href=http://t.co/ZmBVO31saP>http://t.co/ZmBVO31saP</a> 2014でプレゼンしました。無事終わってよかった（小並感） <a href=https://t.co/phDA3K143B>https://t.co/phDA3K143B</a></p>&mdash; 1000ch (@1000ch) <a href=https://twitter.com/1000ch/status/535347007984906240>2014, 11月 20</a></blockquote>
<p>このシンガポール遠征に発つ前に、「海外で発表がナントカカントカ…」という話をしていて、ノリでスライドを準備していたものの、その時はこういったLT枠があるとは知らない状態。</p>
<p>そして、LT枠の存在を<a href=http://twitter.com/yomotsu>@yomotsu</a>さんのこのツイートで知る。</p>
<blockquote class=twitter-tweet lang=ja><p>申し込んでしまったーーー！もう後には引けませぬ… i just entered for 5 min presentation at <a href="https://twitter.com/hashtag/jsconfasia?src=hash">#jsconfasia</a> I’m not confident talk in english tho… <a href=http://t.co/hAnrQRDzx9>pic.twitter.com/hAnrQRDzx9</a></p>&mdash; Akihiro Oyamada (@yomotsu) <a href=https://twitter.com/yomotsu/status/534730164341460992>2014, 11月 18</a></blockquote>
<p>申し込んでみたものの、「希望者が殺到してたら時間ないだろうなー」と思っていた。が、いざ主催スタッフに話を聞いてみると申込者は6人しかいなかったという展開で、難なく枠をゲット出来てしまったという話。</p>
<iframe loading=lazy class="dropshadow speakerdeck-iframe" src=https://speakerdeck.com/player/e18016304ebe01320da372c75fc688f9 title="We should optimize images" allowfullscreen style=aspect-ratio:560/420 data-ratio=1.3333333333333333></iframe>
<p>滅多に無いチャンスだったと思うので、良い経験になった。</p>
<blockquote class=twitter-tweet lang=ja><p>CyberAgent gentleman representing Japan at <a href="https://twitter.com/hashtag/jsconfasia?src=hash">#jsconfasia</a> .頑張れ！ <a href=http://t.co/7tESwlz3wm>pic.twitter.com/7tESwlz3wm</a></p>&mdash; Kristian Faeldt (@faeldtk) <a href=https://twitter.com/faeldtk/status/535340940123049984>2014, 11月 20</a></blockquote>
<p>援護射撃ありがとうございます。ちなみにこのセッションの元ネタは<a href=http://bit.ly/we-should-optimize-images>前にMediumに投下したもの</a>です。</p>
<p>明日は<a href=http://twitter.com/yomotsu>@yomotsu</a>さんと<a href=http://twitter.com/ginpei_jp>@ginpei_jp</a>さんがやります。6人中3人が日本人ね。</p>
<h2 id=念願のチリクラブ>念願のチリ・クラブ</h2>
<p>今日は皆でホテルの近くにある、Red Houseという中華料理のレストラン(?)に行ってきた。お目当ては名物のチリ・クラブ。</p>
<blockquote class=instagram-media data-instgrm-captioned data-instgrm-version=4 style="background:#fff;border:0;border-radius:3px;box-shadow:0 0 1px rgba(0,0,0,.5),0 1px 10px rgba(0,0,0,.15);margin:1px;max-width:658px;padding:0;width:99.375%;width:-webkit-calc(100% - 2px);width:calc(100% - 2px)"><div style=padding:8px> <div style="background:#f8f8f8;line-height:0;margin-top:40px;padding:50% 0;text-align:center;width:100%"> <div style="background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAAGFBMVEUiIiI9PT0eHh4gIB4hIBkcHBwcHBwcHBydr+JQAAAACHRSTlMABA4YHyQsM5jtaMwAAADfSURBVDjL7ZVBEgMhCAQBAf//42xcNbpAqakcM0ftUmFAAIBE81IqBJdS3lS6zs3bIpB9WED3YYXFPmHRfT8sgyrCP1x8uEUxLMzNWElFOYCV6mHWWwMzdPEKHlhLw7NWJqkHc4uIZphavDzA2JPzUDsBZziNae2S6owH8xPmX8G7zzgKEOPUoYHvGz1TBCxMkd3kwNVbU0gKHkx+iZILf77IofhrY1nYFnB/lQPb79drWOyJVa/DAvg9B/rLB4cC+Nqgdz/TvBbBnr6GBReqn/nRmDgaQEej7WhonozjF+Y2I/fZou/qAAAAAElFTkSuQmCC);display:block;height:44px;margin:0 auto -44px;position:relative;top:-22px;width:44px"></div></div> <p style="margin:8px 0 0;padding:0 4px"> <a href=https://instagram.com/p/vn3GiJBp9E/ style=color:#000;font-family:Arial,sans-serif;font-size:14px;font-style:normal;font-weight:400;line-height:17px;text-decoration:none;word-wrap:break-word target=_top>蟹</a></p> <p style="color:#c9c8cd;font-family:Arial,sans-serif;font-size:14px;line-height:17px;margin-bottom:0;margin-top:8px;overflow:hidden;padding:8px 0 7px;text-align:center;text-overflow:ellipsis;white-space:nowrap">A photo posted by 1000ch (@1000ch) on <time style=font-family:Arial,sans-serif;font-size:14px;line-height:17px datetime=2014-11-20T13:14:25+00:00>Nov 11, 2014 at 5:14am PST</time></p></div></blockquote>
<p>蟹2匹がほぼ丸ごと出てきた。ざっくりぶつ切りになっているだけで、分断された部位をペンチのような機器で殻を破壊し、そして手をチリソース塗れにしながら食べた。</p>
<p>プレゼンが終わった後のビールは格別だ。</p>
<ul>
<li><a href=/posts/2014/singapore-the-1st-day.html>シンガポール遠征初日</a></li>
<li><a href=/posts/2014/cssconf-asia-2014.html>CSSConf.Asia 2014</a></li>
<li>JSConf.Asia 2014 1日目</li>
<li><a href=/posts/2014/jsconf-asia-2014-2nd.html>JSConf.Asia 2014 2日目</a></li>
<li><a href=/posts/2014/look-back-in-singapore.html>JSConf.Asia 2014を振り返って</a></li>
</ul>
<aside class=Share>
<div class=Share__Item>
<button type=button class=Share__Button>🔗 この記事をシェアする</a>
</div>
</aside>
<div popover=auto id=Popover>タイトルと URL をコピーしました</div>
<nav class=Pager>
<div class="Pager__Item Pager__Item--left">
<a href=/posts/2014/cssconf-asia-2014.html>👈 CSSConf.Asia 2014</a>
</div>
<div class="Pager__Item Pager__Item--right">
<a href=/posts/2014/jsconf-asia-2014-2nd.html>JSConf.Asia 2014 2日目 👉</a>
</div>
</nav>
</main>
<aside class=Aside></aside>
<footer class=Footer style=margin-bottom:2%>
<h1>Author</h1>
<div class=Media>
<picture>
<source srcset=/img/1000ch.avif type=image/avif>
<img class=Media__Figure src=/img/1000ch.jpg alt>
</picture>
<div class=Media__Body>
<h3 class=Media__Title>1000ch <a href=https://twitter.com/1000ch class=twitter-follow-button data-show-count=false data-show-screen-name=false>Follow @1000ch</a></h3>
<p>Web アプリケーション開発を専門とするソフトウェアエンジニア。企業で働く傍ら、技術顧問として複数企業のエンジニアリングに関わり、高品質で維持しやすい Web アプリケーションを作るための活動を続けている。</p>
</div>
</div>
</footer>
</div>
<script defer src=https://platform.twitter.com/widgets.js></script>
<script defer src=https://platform.instagram.com/en_US/embeds.js></script>
<script defer src=https://strava-embeds.com/embed.js></script>
<script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.2/build/highlight.min.js></script>
<script type=module>
import AffiliateLink from '/js/affiliate-link.js';

customElements.define('affiliate-link', AffiliateLink);

const input = document.querySelector('#auto-phrase');
input.checked = localStorage.getItem('auto-phrase');

input.addEventListener('change', event => {
  if (event.target.checked) {
    localStorage.setItem('auto-phrase', true);
  } else {
    localStorage.removeItem('auto-phrase');
  }
});

document.querySelectorAll('pre code').forEach(block => {
  hljs.highlightBlock(block);
});

document.querySelector('.Share__Item button').addEventListener('click', async event => {
  event.preventDefault();

  const data = {
    title: document.title,
    text: document.title,
    url: location.href
  };

  if (navigator.canShare?.(data)) {
    await navigator.share(data);
  } else {
    await navigator.clipboard?.writeText(`${data.title} ${data.url}`);
    const popover = document.querySelector('#Popover');
    popover.showPopover();

    setTimeout(() => {
      popover.hidePopover();
    }, 2000);
  }
});
</script>
</body>
</html>