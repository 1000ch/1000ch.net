<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>一歩進んだHTML/CSS/JSを目指すために - EagleLand</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel="shortcut icon" href=/favicon.png><link rel="shortcut icon" href=/favicon.svg type=image/svg+xml sizes=any><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/a11y-dark.min.css><link rel=stylesheet href=/css/settings.css><link rel=stylesheet href=/css/base.css><link rel=stylesheet href=/css/layout.css><link rel=stylesheet href=/css/components.css><link rel=alternate href=/rss.xml title=1000ch.net type=application/rss+xml><meta name=author content="Shogo Sensui"><meta name=copyright content="Copyright (c) Shogo Sensui; Licensed under Creative Commons Attribution-Noncommercial-Share Japan"><meta property="og:description" content='「なんとなく書きたくないけど、どう意識してコーディングしていけばいいのかわからない…。それを解消するためのツールがあるので、紹介する。
HTMLInspector philipwalton/html-inspector Introducing HTML Inspector こちらはHTMLを解析して悪いところを指摘してくれるツール。たぶんガイドラインとかそれぞれあると思いますが、基本的にはコレに沿ってもいいかと。スクリプトを差し込んで実行すると、指摘事項がconsoleに出力される。githubのリポジトリからダウンロードするか、bowerで落としてくるか。
$ bower install html-inspector 次に、解析したいページに以下のコードを埋め込む。
<script src="path/to/html-inspector.js"></script> <script> HTMLInspector.inspect() </script> HTMLInspector.inspect()には引数を与えられる。設定を渡すことでどういう解析を実行するかを指定できる。
Configuring HTML Inspector デフォルトだと以下のようになっている。解析ルールの追加などは都度更新されていくと思うので、公式ドキュメントを参照して欲しい。
{ useRules: null, //(Array) 解析のルールの指定 domRoot: "html", //(selector | element) 解析を開始するルート exclude: "svg", //(selector | element | Array) 解析の対象としない要素を指定 excludeSubTree: ["svg", "iframe"], //(selector | element | Array) 解析の対象としないサブツリー要素を指定 onComplete: function(errors) {//(Function) 解析完了時のコールバック errors.forEach(function(error) { console.warn(error.message, error.context) }) } } HTMLInspectorをGruntで実行出来たらいいのかなとか、むしろなぜそうなってないのか一瞬考えたけど、JavaScript側でテンプレート持ってたら無理（PhantomJSはさむとか？）かとか、サーバーサイドで動的にHTMLを返していると面倒くさいな、むしろそれでこういうスクリプト埋め込んでもらう形式なんだろうな、と。
それでも開発時にしか必要のない2行なので、ChromeのExtensionにしてみた。
H:inspector これで一応、解析したいページを好きなタイミングで解析できるようになったと思う。inspect()メソッドに渡す引数はDevToolsのパネルで編集・指定できるようにした。ChromeExtensionなら導入はそれなりに楽かと。
CSSLint こちらはNicole SullivanとNicholas C. Zakasが作った、CSSのlintツール。'><meta property="og:image" content="https://1000ch.net//img/apple-touch-icon.png"><meta name=twitter:card content="summary"><meta property="og:type" content="article"><meta property="og:url" content="https://1000ch.net/posts/2013/brush-up-your-coding/"><meta property="og:site_name" content="EagleLand"><meta property="og:title" content="一歩進んだHTML/CSS/JSを目指すために"><meta name=twitter:site content="@1000ch"><meta name=twitter:url content="https://1000ch.net/posts/2013/brush-up-your-coding/"><meta name=twitter:title content="一歩進んだHTML/CSS/JSを目指すために"><meta name=google-site-verification content="BWewniqiBzRmrhpj51eLwug-F4hamFfyznl-ARb-Y4Y"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed sizes=114x114 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed sizes=72x72 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-49530352-1","1000ch.net"),ga("send","pageview")</script></head><body><div class=container><header class=header><h1 class=header-title><a href=/><img src=/img/icon.svg>
<span>EagleLand</span></a></h1><nav><a href=/rss.xml>📻 RSS</a>
<a href="https://www.google.co.jp/search?q=site%3A1000ch.net">🔍 検索</a>
<a href=https://shogosensui.com>🌎 Author</a></nav></header><main class=main><h1>一歩進んだHTML/CSS/JSを目指すために</h1><p style=margin:0;text-align:right>Published at 2013-08-01</p><p>「なんとなく書きたくないけど、どう意識してコーディングしていけばいいのかわからない…。それを解消するためのツールがあるので、紹介する。</p><h2 id=htmlinspector>HTMLInspector</h2><ul><li><a href=https://github.com/philipwalton/html-inspector>philipwalton/html-inspector</a></li><li><a href=http://philipwalton.com/articles/introducing-html-inspector/>Introducing HTML Inspector</a></li></ul><p>こちらはHTMLを解析して悪いところを指摘してくれるツール。たぶんガイドラインとかそれぞれあると思いますが、基本的にはコレに沿ってもいいかと。スクリプトを差し込んで実行すると、指摘事項がconsoleに出力される。<a href=https://github.com/philipwalton/html-inspector>githubのリポジトリ</a>からダウンロードするか、bowerで落としてくるか。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ bower install html-inspector
</span></span></code></pre></div><p>次に、解析したいページに以下のコードを埋め込む。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;path/to/html-inspector.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span>&gt; <span style=color:#a6e22e>HTMLInspector</span>.<span style=color:#a6e22e>inspect</span>() &lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><p><code>HTMLInspector.inspect()</code>には引数を与えられる。設定を渡すことでどういう解析を実行するかを指定できる。</p><ul><li><a href=https://github.com/philipwalton/html-inspector#configuring-html-inspector>Configuring HTML Inspector</a></li></ul><p>デフォルトだと以下のようになっている。解析ルールの追加などは都度更新されていくと思うので、公式ドキュメントを参照して欲しい。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>useRules</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>, <span style=color:#75715e>//(Array) 解析のルールの指定
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>domRoot</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;html&#34;</span>, <span style=color:#75715e>//(selector | element) 解析を開始するルート
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>exclude</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;svg&#34;</span>, <span style=color:#75715e>//(selector | element | Array) 解析の対象としない要素を指定
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>excludeSubTree</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;svg&#34;</span>, <span style=color:#e6db74>&#34;iframe&#34;</span>], <span style=color:#75715e>//(selector | element | Array) 解析の対象としないサブツリー要素を指定
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>onComplete</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>errors</span>) {<span style=color:#75715e>//(Function) 解析完了時のコールバック
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>forEach</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>warn</span>(<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>message</span>, <span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>context</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>HTMLInspectorをGruntで実行出来たらいいのかなとか、むしろなぜそうなってないのか一瞬考えたけど、JavaScript側でテンプレート持ってたら無理（PhantomJSはさむとか？）かとか、サーバーサイドで動的にHTMLを返していると面倒くさいな、むしろそれでこういうスクリプト埋め込んでもらう形式なんだろうな、と。</p><p>それでも開発時にしか必要のない2行なので、ChromeのExtensionにしてみた。</p><ul><li><a href=https://chrome.google.com/webstore/detail/hinspector/poeiekompeckjdiigdamalgoahpldgbp>H:inspector</a></li></ul><p>これで一応、解析したいページを好きなタイミングで解析できるようになったと思う。<code>inspect()</code>メソッドに渡す引数はDevToolsのパネルで編集・指定できるようにした。ChromeExtensionなら導入はそれなりに楽かと。</p><h2 id=csslint>CSSLint</h2><p>こちらはNicole SullivanとNicholas C. Zakasが作った、CSSのlintツール。</p><ul><li><a href=http://www.stubbornella.org/content/2011/06/15/css-lint-open-sourced/>CSS Lint open sourced</a></li><li><a href=http://csslint.net/>CSS LINT</a></li><li><a href=https://github.com/stubbornella/csslint>stubbornella/csslint</a></li><li><a href=https://github.com/stubbornella/csslint/wiki>stubbornella/csslint - wiki</a></li></ul><p>Node.jsで実行する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ npm install -g csslint
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ csslint target.css
</span></span></code></pre></div><p>都度ターミナルから実行するのもアレなので、Gruntなどで自動化するのが一般的かと思う。</p><ul><li><a href=https://github.com/gruntjs/grunt-contrib-csslint>gruntjs/grunt-contrib-csslint</a></li></ul><p>インストールはこちら。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ npm install grunt-contrib-csslint --save-dev
</span></span></code></pre></div><p>Gruntの使い方は<a href=/posts/2013/gruntjs-0-4/>ここ</a>とか<a href=/posts/2012/gruntjs-introduction/>ここ</a>を見ていただけると。こちらもlintの方針を指定することができるけど、デフォルトで注意される内容を直すだけでもだいぶキレイになる。</p><h2 id=jshint>JSHint</h2><p>最後にJavaScriptのチェックツール。こちらも前述のCSSLintと同様のことが言えるので、Gruntと一緒に紹介してしまう。</p><ul><li><a href=http://www.jshint.com/>JS Hint</a></li><li><a href=http://www.jshint.com/docs/>Documentation</a></li><li><a href=https://github.com/jshint/jshint>jshint/jshint</a></li><li><a href=https://github.com/gruntjs/grunt-contrib-jshint>gruntjs/grunt-contrib-jshint</a></li></ul><p>JSHintのインストール。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ npm install -g jshint
</span></span></code></pre></div><p>「非推奨プロパティを使うな！」とか比較演算子の使い方のあたりを指摘してくれる。何をチェックするしないの指定はコマンドライン引数でもできるが、<code>.jshintrc</code>という設定ファイルで一括指定可能。さらにこの<code>.jshintrc</code>をGruntと連携させるなりするのがいいかと。Gruntが公式で配布しているモジュールのインストールはこちら。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ npm install grunt-contrib-jshint --save-dev
</span></span></code></pre></div><p>ルールセットは<code>.jshintrc</code>で行う他、<code>gruntfile.js</code>のタスクのオプションにも指定することが出来る。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>grunt</span>.<span style=color:#a6e22e>initConfig</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>jshint</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>options</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>curly</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>eqeqeq</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>eqnull</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>browser</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>globals</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>jQuery</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p><code>gruntfile.js</code>への指定はこのあたりを参考に。</p><ul><li><a href=https://github.com/gruntjs/grunt-contrib-jshint#jshintrc>gruntjs/grunt-contrib-jshint - jshintrc</a></li></ul><h2 id=意義とか>意義とか</h2><p>テストなどにも同じ事が言えるが、こういったこと継続的にやることが重要かと思っている。その点、メンテナビリティとポータビリティなどを考えて<code>package.json</code>だけで済むGruntが最有力候補になるかと。</p><ul><li><a href=http://t32k.me/mol/log/the-perfect-css-i-thought/>ぼくのかんがえたさいきょうのしーえしゅえしゅ - MOL</a></li><li><a href=https://github.com/t32k/maple>t32k/maple</a></li></ul><p>こちら<a href=http://twitter.com/t32k>@t32k</a>氏が作成したフレームワークだけど、Grunt周りやcssの方針など参考になる（@t32k氏にはH:inspectorのアイコンを頂いた）。JSHint、CSSLintに加えて、<a href=https://github.com/JamieMason/grunt-imageoptim>grunt-imageoptim</a>や<a href=https://github.com/t32k/grunt-kss>grunt-kss</a>なども一緒に導入可能になっており、画像の最適化やスタイルガイドの作成も自動化できるようになっている。</p><p>業務でプロジェクトを幾つか経験したけど、最初の設計と継続的リファクタリングが如何に大事であるかを痛感していて、特に運用が大変なプロジェクトだと、どうしてもフロントエンドのコードが犠牲になりがち。それでも、 <strong>ディベロッパーは理性を保ってコードを清潔に保つ努力をしていかなければならない</strong> と、思う。</p><p>リファクタリングしてコードを修正するのは、スクラッチで開発していくこととは比較にならないくらい難しい。ましてや稼働中のサービスに一気に手を入れるのは非常に勇気のいる作業。ひとつひとつの蓄積（ある種我慢の蓄積かもしれないけど）が、</p><ul><li>Webのパフォーマンスにつながり</li><li>運用スピードの向上</li><li>ディベロッパーのスキルアップ</li></ul><p>につながると、思ってる。</p><aside class=nav><button type=button id=share-button>🔗 この記事をシェアする</button>
<a href=https://github.com/1000ch/1000ch.net/edit/main/content/posts/2013/brush-up-your-coding.md>🔗 この記事を GitHub で編集する</a><div><a href=/posts/2013/gist-slide/>👈 Gistを簡易スライドにするGistSlideを作った</a></div><div><a href=/posts/2013/github-travis-ci/>👉 Travis CIを使ったGitHubプロジェクトの継続的インテグレーション</a></div></aside><div popover=auto id=popover>タイトルと URL をコピーしました</div></main><aside class=aside></aside><footer class=footer><h2>Preference</h2><div class=preference><label><input type=checkbox switch id=auto-phrase> 日本語のフレーズ改行
</label><label><input type=checkbox switch id=dark-mode> ダークモード</label></div><h2>Notice</h2><ul class=notice><li>コンテンツの正確性や信頼性には配慮していますが、必ずしもそれらを保証はしません。意見や見解は、個人の立場において述べたものであり、所属組織等を代表するものではありません。コンテンツの利用およびその結果に対し、一切の責任を負いかねます</li><li>当サイトは amazon.co.jp を宣伝しリンクすることによって、サイトが紹介料を獲得できる手段を提供することを目的に設定されたアフィリエイト宣伝プログラムである、Amazon アソシエイト・プログラムの参加者です</li></ul></footer></div><script defer src=https://platform.twitter.com/widgets.js></script><script defer src=https://platform.instagram.com/en_US/embeds.js></script><script defer src=https://strava-embeds.com/embed.js></script><script defer src=https://embed.bsky.app/static/embed.js></script><script type=module src=https://unpkg.com/baseline-status@1.0.11/baseline-status.min.js></script><script type=module>
import hljs from 'https://unpkg.com/@highlightjs/cdn-assets@11.11.1/es/highlight.min.js';

document.querySelectorAll('pre code').forEach(element => {
  hljs.highlightElement(element);
});
</script><script type=module>
import AffiliateLink from '/js/affiliate-link.js';

customElements.define('affiliate-link', AffiliateLink);

const autoPhrase = document.querySelector('#auto-phrase');
const darkMode =  document.querySelector('#dark-mode');
autoPhrase.checked = localStorage.getItem('auto-phrase');
darkMode.checked = localStorage.getItem('dark-mode');

autoPhrase?.addEventListener('change', event => {
  if (event.target.checked) {
    localStorage.setItem('auto-phrase', true);
  } else {
    localStorage.removeItem('auto-phrase');
  }
});

darkMode?.addEventListener('change', event => {
  if (event.target.checked) {
    localStorage.setItem('dark-mode', true);
  } else {
    localStorage.removeItem('dark-mode');
  }
});

const shareButton = document.querySelector('#share-button');
shareButton?.addEventListener('click', async event => {
  event.preventDefault();

  const data = {
    title: document.title,
    text: document.title,
    url: location.href
  };

  if (navigator.canShare?.(data)) {
    await navigator.share(data);
  } else {
    await navigator.clipboard?.writeText(`${data.title} ${data.url}`);
    const popover = document.querySelector('#Popover');
    popover.showPopover();

    setTimeout(() => {
      popover.hidePopover();
    }, 2000);
  }
});
</script></body></html>