<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Raspberry PiにChromiumとかJenkinsを入れてみた - EagleLand</title><link rel=icon href=/favicon.png><link rel="shortcut icon" href=/favicon.png><link rel="shortcut icon" href=/favicon.svg type=image/svg+xml sizes=any><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.2/build/styles/dracula.min.css><link rel=stylesheet href=/css/font.css><link rel=stylesheet href=/css/settings.css><link rel=stylesheet href=/css/tools.css><link rel=stylesheet href=/css/generic.css><link rel=stylesheet href=/css/base.css><link rel=stylesheet href=/css/objects.css><link rel=stylesheet href=/css/components.css><link rel=stylesheet href=/css/trumps.css><link rel=alternate href=/rss.xml title=1000ch.net type=application/rss+xml><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto+Mono"><meta name=author content="Shogo Sensui"><meta name=copyright content="Copyright (c) Shogo Sensui; Licensed under Creative Commons Attribution-Noncommercial-Share Japan"><meta property="og:description" content="Raspberry PiにChromiumとかJenkinsを入れてみた この記事はFrontrend Advent Calendar 2013 2日目の記事です。
この前フロントエンドな同僚の方々にRaspberry Piをプレゼントして頂いたので、アレコレしてみたログを晒してみる。Frontrendのアドベントカレンダーに書いて良いのか些か迷ったものの、フロントエンドディベロッパーたるものLinuxやらJenkinsやらも触れるようにならないとね！
そのまま飾っておくのは勿体無いので周辺機器買い揃えて動くようにしてみた。そもそもラズベリーパイとは、
 Raspberry Pi（ラズベリーパイ）は、ラズベリーパイ財団によって英国で開発されたARMプロセッサを搭載したシングルボードコンピュータ。 via Wikipedia
 となっている。
手のひらサイズで非常に小さいながらも、CPU、GPU、メモリ、USB2.0 x 2、HDMI、イーサネット等を備えている。SDカードが挿せるようになっており、OSのイメージをSDカードに焼いて、 USBケーブルから電源を供給し、起動するようなイメージ。
 Raspberry Pi Raspberry Pi - Wikipedia  用意したもの 電源を供給しなければ始まらないのでMicro-USB(A-MicroB)という規格(?)のケーブルを購入。あと、OSイメージを焼くSDカードがないと話にならないのでそれも購入。
  USBは2口しかないけど、ハブ等駆使すればラズパイだけでそれなりに楽しめそうな。
OSイメージをSDカードに焼く Linuxなら何でも動くっぽいけど、基本の Raspbian をDownloads | Raspberry Piからダウンロードしてみる。ダウンロードしてきたzipを解凍すると、.img拡張子のイメージファイルがある。そのイメージファイルをSDカードに焼けばRaspbianの起動ディスクの完成。ということで、MacにSDカードを挿し込む。
挿す前 $ df -h Filesystem Size Used Avail Capacity iused ifree %iused Mounted on /dev/disk1 233Gi 106Gi 126Gi 46% 27952569 33026246 46% / 挿した後 $ df -h Filesystem Size Used Avail Capacity iused ifree %iused Mounted on /dev/disk1 233Gi 106Gi 126Gi 46% 27973543 33005272 46% / /dev/disk2s1 15Gi 2."><meta property="og:image" content="https://1000ch.net/img/apple-touch-icon.png"><meta name=twitter:card content="summary"><meta property="og:type" content="article"><meta property="og:url" content="https://1000ch.net/posts/2013/try-raspberry-pi.html"><meta property="og:site_name" content="EagleLand"><meta property="og:title" content="Raspberry PiにChromiumとかJenkinsを入れてみた"><meta name=twitter:site content="@1000ch"><meta name=twitter:url content="https://1000ch.net/posts/2013/try-raspberry-pi.html"><meta name=twitter:title content="Raspberry PiにChromiumとかJenkinsを入れてみた"><meta name=google-site-verification content="BWewniqiBzRmrhpj51eLwug-F4hamFfyznl-ARb-Y4Y"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed sizes=114x114 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed sizes=72x72 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-49530352-1','1000ch.net');ga('send','pageview');</script></head><body><div class=Container><header class=Header><h1 class=Header__Title><a href=/>EagleLand</a></h1><nav class=Header__Menu><div class=Header__MenuItem><img src=/img/rss.svg alt>
<a href=/rss.xml>RSS</a></div><div class=Header__MenuItem><img src=/img/heart.svg alt>
<a href=https://shogosensui.com>Activity</a></div><div class=Header__MenuItem><img src=/img/facebook.svg alt>
<a href=https://www.facebook.com/1000ch.net>Facebook</a></div></nav></header><main class=Main><span class="Label Label--gray pull-left">2013.12.02</span><h1 id=raspberry-piにchromiumとかjenkinsを入れてみた>Raspberry PiにChromiumとかJenkinsを入れてみた</h1><p>この記事は<a href=http://www.adventar.org/calendars/62>Frontrend Advent Calendar 2013</a> 2日目の記事です。</p><p>この前フロントエンドな同僚の方々にRaspberry Piをプレゼントして頂いたので、アレコレしてみたログを晒してみる。Frontrendのアドベントカレンダーに書いて良いのか些か迷ったものの、フロントエンドディベロッパーたるものLinuxやらJenkinsやらも触れるようにならないとね！</p><p><img src=/img/posts/2013/raspberry-pi/raspberrypi.jpg alt></p><p>そのまま飾っておくのは勿体無いので周辺機器買い揃えて動くようにしてみた。そもそもラズベリーパイとは、</p><blockquote><p>Raspberry Pi（ラズベリーパイ）は、ラズベリーパイ財団によって英国で開発されたARMプロセッサを搭載したシングルボードコンピュータ。 via Wikipedia</p></blockquote><p>となっている。</p><p>手のひらサイズで非常に小さいながらも、CPU、GPU、メモリ、USB2.0 x 2、HDMI、イーサネット等を備えている。SDカードが挿せるようになっており、OSのイメージをSDカードに焼いて、
USBケーブルから電源を供給し、起動するようなイメージ。</p><ul><li><a href=http://www.raspberrypi.org/>Raspberry Pi</a></li><li><a href=http://ja.wikipedia.org/wiki/Raspberry_Pi>Raspberry Pi - Wikipedia</a></li></ul><h2 id=用意したもの>用意したもの</h2><p>電源を供給しなければ始まらないのでMicro-USB(A-MicroB)という規格(?)のケーブルを購入。あと、OSイメージを焼くSDカードがないと話にならないのでそれも購入。</p><iframe src="https://rcm-fe.amazon-adsystem.com/e/cm?t=1000ch-22&o=9&p=8&l=as1&asins=B003UIRIFY&ref=qf_sp_asin_til&fc1=000000&IS2=1&lt1=_blank&m=amazon&lc1=0000FF&bc1=000000&bg1=FFFFFF&f=ifr" style=width:120px;height:240px scrolling=no marginwidth=0 marginheight=0 frameborder=0></iframe>
<iframe src="https://rcm-fe.amazon-adsystem.com/e/cm?t=1000ch-22&o=9&p=8&l=as1&asins=B003YC0U5G&ref=qf_sp_asin_til&fc1=000000&IS2=1&lt1=_blank&m=amazon&lc1=0000FF&bc1=000000&bg1=FFFFFF&f=ifr" style=width:120px;height:240px scrolling=no marginwidth=0 marginheight=0 frameborder=0></iframe><p>USBは2口しかないけど、ハブ等駆使すればラズパイだけでそれなりに楽しめそうな。</p><h2 id=osイメージをsdカードに焼く>OSイメージをSDカードに焼く</h2><p>Linuxなら何でも動くっぽいけど、基本の <strong>Raspbian</strong> を<a href=http://www.raspberrypi.org/downloads>Downloads | Raspberry Pi</a>からダウンロードしてみる。ダウンロードしてきたzipを解凍すると、<code>.img</code>拡張子のイメージファイルがある。そのイメージファイルをSDカードに焼けばRaspbianの起動ディスクの完成。ということで、MacにSDカードを挿し込む。</p><h3 id=挿す前>挿す前</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ df -h
Filesystem      Size   Used  Avail Capacity  iused    ifree %iused  Mounted on
/dev/disk1     233Gi  106Gi  126Gi    46% <span style=color:#ae81ff>27952569</span> <span style=color:#ae81ff>33026246</span>   46%   /
</code></pre></div><h3 id=挿した後>挿した後</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ df -h
Filesystem      Size   Used  Avail Capacity  iused    ifree %iused  Mounted on
/dev/disk1     233Gi  106Gi  126Gi    46% <span style=color:#ae81ff>27973543</span> <span style=color:#ae81ff>33005272</span>   46%   /
/dev/disk2s1    15Gi  2.2Mi   15Gi     1%        <span style=color:#ae81ff>0</span>        <span style=color:#ae81ff>0</span>  100%   /Volumes/NO NAME
</code></pre></div><p>どうやら<code>/dev/disk2s1</code>がSDカードらしい。それをアンマウントする。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ diskutil unmount /dev/disk2s1
</code></pre></div><p>ダウンロードしてきたイメージをSDに焼く。<code>/dev/disk2s1</code>の場合は<code>/dev/rdisk2</code>のように、先頭に<code>r</code>を付与し、最後の<code>s1</code>を除く。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo dd <span style=color:#66d9ef>if</span><span style=color:#f92672>=</span>/path/to/2013-09-25-wheezy-raspbian.img of<span style=color:#f92672>=</span>/dev/rdisk2 bs<span style=color:#f92672>=</span>1m
2825+0 records in
2825+0 records out
<span style=color:#ae81ff>2962227200</span> bytes transferred in 610.198031 secs <span style=color:#f92672>(</span><span style=color:#ae81ff>4854534</span> bytes/sec<span style=color:#f92672>)</span>
</code></pre></div><p>思ったより時間かかった（10分弱くらい）。中身を確認してみる。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ fd -h
Filesystem      Size   Used  Avail Capacity  iused    ifree %iused  Mounted on
/dev/disk2s1    56Mi   18Mi   38Mi    33%      <span style=color:#ae81ff>512</span>        <span style=color:#ae81ff>0</span>  100%   /Volumes/boot
</code></pre></div><p>書き込まれてるっぽい。SDカードのセットアップにはMacだと<a href=http://alltheware.wordpress.com/2012/12/11/easiest-way-sd-card-setup/>こういう便利なアプリ</a>もあるっぽい。</p><h2 id=送電して起動>送電して起動</h2><p>手元にあったHDMIでディスプレイに繋いで、USBキーボードも接続する。Raspberry Piには電源ボタンはなくて、前述のように給電を開始すると起動する。</p><p><img src=/img/posts/2013/raspberry-pi/raspbian-cli.jpg alt></p><p>起動すると初期設定画面が表示されるので、キーボードで設定をしていく。項目もそんなに複雑ではない。やった設定は以下の通り。</p><ul><li><strong>Expand Filesystem</strong> - SDの残り領域をOS用に使う。</li><li><strong>Enable Boot to Desktop/Scratch</strong> - CUIで起動するかGUIで起動するかの設定。</li><li><strong>Internationalisation Options</strong> - Location等の設定。 <strong>Asia/Tokyo</strong> だけ設定。</li><li><strong>Advanced Options</strong> - SSHを有効にした。</li></ul><p>CUIからでも<code>startx</code>でGUIを起動できるし、GUIからでもXterminalというソフトでCUIを起動できる。ただし、マウスがない状態でGUIを立ち上げると身動きとれなくなる。かも。僕はGUIを少し楽しんだら、CUIをデフォルト起動にした。これでこのRaspberry PiにSSHでログイン出来るようになったはず。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ raspberrypi login:pi
Password raspberry（デフォルトのままの場合）
</code></pre></div><p>何か困って初期設定画面に戻りたい場合は<code>sudo raspi-config</code>を実行すれば良い。</p><h2 id=ネットワークに接続>ネットワークに接続</h2><p>Raspberry Piをネットワークに繋げるべく、AirMac Expressからイーサネット経由で接続。</p><iframe src="https://rcm-fe.amazon-adsystem.com/e/cm?t=1000ch-22&o=9&p=8&l=as1&asins=B00B42GZV6&ref=qf_sp_asin_til&fc1=000000&IS2=1&lt1=_blank&m=amazon&lc1=0000FF&bc1=000000&bg1=FFFFFF&f=ifr" style=width:120px;height:240px scrolling=no marginwidth=0 marginheight=0 frameborder=0></iframe><p>LANケーブルでAirMac Expressと接続して<code>sudo reboot</code>でRaspberry Pi再起動。</p><p>そうするとIPアドレスが勝手に割り振られて、起動ログの最後にIPアドレスが出力される。<code>ifconfig</code>とかでももちろん表示される。これは後ほどMacからのログインに使うので覚えておく。</p><p>ネットワークに繋がっているかどうか、<code>ping</code>で確認。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ ping google.com
<span style=color:#ae81ff>64</span> bytes from kix01s04-in-f7.1e100.net <span style=color:#f92672>(</span>173.194.38.39<span style=color:#f92672>)</span>: icmp_req<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> ttl<span style=color:#f92672>=</span><span style=color:#ae81ff>51</span> time<span style=color:#f92672>=</span>13.6 ms
<span style=color:#ae81ff>64</span> bytes from kix01s04-in-f7.1e100.net <span style=color:#f92672>(</span>173.194.38.39<span style=color:#f92672>)</span>: icmp_req<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span> ttl<span style=color:#f92672>=</span><span style=color:#ae81ff>52</span> time<span style=color:#f92672>=</span>12.7 ms
<span style=color:#ae81ff>64</span> bytes from kix01s04-in-f7.1e100.net <span style=color:#f92672>(</span>173.194.38.39<span style=color:#f92672>)</span>: icmp_req<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span> ttl<span style=color:#f92672>=</span><span style=color:#ae81ff>52</span> time<span style=color:#f92672>=</span>13.4 ms
<span style=color:#ae81ff>64</span> bytes from kix01s04-in-f7.1e100.net <span style=color:#f92672>(</span>173.194.38.39<span style=color:#f92672>)</span>: icmp_req<span style=color:#f92672>=</span><span style=color:#ae81ff>4</span> ttl<span style=color:#f92672>=</span><span style=color:#ae81ff>52</span> time<span style=color:#f92672>=</span>12.8 ms
</code></pre></div><p>大丈夫そう。</p><p>折角なのでGUIでGoogle Chromeをインストールしようとしたら、アーカイブファイルがどうのこうのとエラーが出るので諦めてChromiumをインストール（ちゃんと<code>.deb</code>パッケージが落ちてくるんだけど何故かダメだった）。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo apt-get update
$ sudo apt-get install chromium
$ startx
</code></pre></div><p>ちょっと重たいけど、ブラウジングを出来るところまで確認した。<code>.deb</code>パッケージがメンテナンスされていないようで、Chromium古いけど。</p><p><img src=/img/posts/2013/raspberry-pi/raspbian-chromium-1.jpg alt>
<img src=/img/posts/2013/raspberry-pi/raspbian-chromium-2.jpg alt></p><h2 id=sshの確認>SSHの確認</h2><p>今度は、さっきメモしておいたRaspberry PiのIPアドレスにMacからSSHしてみる。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ ssh pi@<span style=color:#f92672>[</span>Raspberry PiのIPアドレス<span style=color:#f92672>]</span>
</code></pre></div><p>パスワード聞かれるので、初期値あるいは設定したパスワードを入力すればOK。IPアドレスがもし変わらないのであれば、この時点で一応ディスプレイなしで楽しめるようになった。あと、無線LANでRaspberry Piにアクセスも<a href=http://www.myu.ac.jp/~xkozima/lab/raspTutorial1.html>WPA使えばいけそう</a>。</p><h2 id=最後にjenkinsを入れてみる>最後にJenkinsを入れてみる</h2><p>かなり重いのが予想できるけど、やってみる。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo apt-get install jenkins
</code></pre></div><p>時間かかったけど、インストール完了。Macから<code>[Raspberry PiのIPアドレス]:8080</code>にアクセスしてみると…</p><p><img src=/img/posts/2013/raspberry-pi/raspberrypi-jenkins.png alt></p><p>OK!!!</p><p>今回触れていないが、デフォルトだと <strong>iptablesの設定はされていない</strong> 。ので、ネットワークに繋げている以上、最低限のファイアーウォールは設定した方が良いとは思う。攻撃されて深刻な被害を受けるような使い方は、されなそうではあるけど。</p><h2 id=まとめ>まとめ</h2><p>ここまで出来れば、あとはある程度自由に遊べそう。node.jsでアプリサーバーたてるもよし、Jenkinsサーバーにするもよし、Chromiumで海外記事を読み漁るもよし。Raspberry Piとパトランプ的な何かを繋げて、 <strong>Jenkinsのビルド成功をトリガーにパトランプを光らせる</strong> なんてことも。</p><aside class=Share><div class=Share__Item><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2f1000ch.net%2fposts%2f2013%2ftry-raspberry-pi.html" title="Share on Facebook" target=_blank><img src=/img/facebook.svg></a></div><div class=Share__Item><a href="https://twitter.com/share?url=https%3a%2f%2f1000ch.net%2fposts%2f2013%2ftry-raspberry-pi.html&text=Raspberry%20Pi%e3%81%abChromium%e3%81%a8%e3%81%8bJenkins%e3%82%92%e5%85%a5%e3%82%8c%e3%81%a6%e3%81%bf%e3%81%9f" title="Share on Twitter" target=_blank><img src=/img/twitter.svg></a></div></aside><nav class=Pager><div class="Pager__Item Pager__Item--left"><a href=/posts/2013/pinput-for-pinboard.html>👈 Pinput ~PinboardユーザーのためのChrome Extension~</a></div><div class="Pager__Item Pager__Item--right"><a href=/posts/2013/sacss-follow-up.html>SaCSS SP4 Frontrend in Sapporoでリファクタリングについて話してきた 👉</a></div></nav></main><aside class=Aside><h1>Author</h1><div class=Media><picture>
<source srcset=/img/1000ch.webp type=image/webp><img class=Media__Figure src=/img/1000ch.jpg alt></picture><div class=Media__Body><h3 class=Media__Title>1000ch <a href=https://twitter.com/1000ch class=twitter-follow-button data-show-count=false data-show-screen-name=false>Follow @1000ch</a></h3><p>ソフトウェアエンジニア。SIer でのプログラマーを経て Web 業界に転職して以来、Web 技術に没頭する日々を送っている。Web 標準の動向やアーキテクチャの流行を追いかけつつ、技術啓蒙や OSS 活動に励んでいる。</p></div></div></aside><footer class=Footer><div class=Banner><div class=Banner__Item><a href=https://creativecommons.org/licenses/by-nc-nd/4.0/deed.ja target=_blank><img src=/img/by-nc-nd.png alt="CC BY-NC-ND 4.0" width=80 height=28></a></div><div class=Banner__Item><form action=https://duckduckgo.com/ role=search><input name=sites type=hidden value=1000ch.net>
<input name=q type=search>
<input type=submit value=Search></form></div></div></footer></div><script defer src=https://platform.twitter.com/widgets.js></script><script defer src=https://platform.instagram.com/en_US/embeds.js></script><script defer src=https://assets.codepen.io/assets/embed/ei.js></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.2/build/highlight.min.js></script><script type=module>
import AffiliateLink from '/js/affiliate-link.js';
import FluidIframe from 'https://cdn.jsdelivr.net/npm/fluid-iframe/dist/index.js';

customElements.define('affiliate-link', AffiliateLink);
customElements.define('fluid-iframe', FluidIframe);

document.querySelectorAll('pre code').forEach(block => {
  hljs.highlightBlock(block);
});

if (navigator.serviceWorker) {
  navigator.serviceWorker.register('/sw.js');
}
</script></body></html>