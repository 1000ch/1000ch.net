<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Zepto.js ver1.0がリリースされた - EagleLand</title>
<link rel=icon href=/favicon.png><link rel="shortcut icon" href=/favicon.png><link rel="shortcut icon" href=/favicon.svg type=image/svg+xml sizes=any><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.2/build/styles/dracula.min.css><link rel=stylesheet href=/css/settings.css><link rel=stylesheet href=/css/tools.css><link rel=stylesheet href=/css/generic.css><link rel=stylesheet href=/css/base.css><link rel=stylesheet href=/css/objects.css><link rel=stylesheet href=/css/components.css><link rel=stylesheet href=/css/trumps.css><link rel=alternate href=/rss.xml title=1000ch.net type=application/rss+xml><meta name=author content="Shogo Sensui"><meta name=copyright content="Copyright (c) Shogo Sensui; Licensed under Creative Commons Attribution-Noncommercial-Share Japan"><meta property="og:description" content="Zepto.js ver1.0がリリースされた v1.0rcが11ヶ月間も続いていたが、ようやくRelease Candidateではなくなり正式リリースとなった。
http://zeptojs.com/ https://github.com/madrobby/zepto おさらい おさらいすると、Zepto.jsはjQueryとAPIの互換性があるモダンブラウザ向け軽量ライブラリ。 jQueryはIE対応とか$.AnimationとかDeferredとかあるけど、その辺りを除いて実装してあるようなイメージ。現状、iOSやSafariにはIE対応とか必要ない訳で、これ使うとファイルサイズ落とせますねっていうコンセプトで作られている。
ビルドについて rakeファイルがいつの間にか消えてる！ Zeptoはカスタムビルドが出来るようになっていて、欲しい実装のみを選んで使える。rcの頃はrakeファイルがあった気がしたんだけど、今はmake経由でビルドするようだ。
Zepto modules モジュール一覧を引用して少し解説する。★がついているのはノーマルビルドに含まれるもの。
polyfill★ - iOS3.x向けのString#trimとArray#reduceの実装。要らないと思う。 zepto★ - Coreモジュール。これはないと話にならない。 event★ - on()とかoff()とか、イベント周りの実装。 detect★ - UserAgentの判定の実装。必要に応じて。 fx★ - アニメーションを実現するanimate()の実装。 fx_methods - animate()を使ったshow()やhide()などの実装。fx依存。 ajax★ - 非同期通信(XMLHttpRequest)の実装。 form★ - form要素の値からQueryStringを作ってくれたりsubmitしてくれるあたり。 assets - iOSのimgのmemory対策用モジュール。コアのremove()のオーバーライド。 data - ノードのdata-へのアクセスではなくメモリベースで情報を格納する機構。コアのdata()のオーバーライド。 selector - jQueryの拡張CSSセレクタ(:firstとか:visibleとか)の実装。 touch - タッチデバイスでのswipeやtapなどのイベントの実装。 gesture - タッチデバイスでのpinchイベントの実装。 stack - andSelf()とend()の実装。 polyfillは要らないケースが多いし、detectもfxも必要に応じて入れればいいので、まずは少ない構成で試してみては如何だろう。
更新履歴の気になるあたり 「 Twitter Bootstrapに対応！ 」 「node.jsベースのビルドになったよ。」 「PhantomJSとTravis CIによる自動テストになった。」 「touchモジュールをデフォルトビルドから外した。」 「 バグがいっぱい直った 」.｡ﾟ+.(･∀･)ﾟ+.ﾟｲｲ!! 「Ajaxで{cache: false}をサポート」 「each()のコールバック中でfalseが返されるとループを止めるようにした。」 Ajaxの{cache: false}は同じリクエストで結果がキャッシュされる話だと思うが、対応策としてダミーでDate."><meta property="og:image" content="https://1000ch.net//img/apple-touch-icon.png"><meta name=twitter:card content="summary"><meta property="og:type" content="article"><meta property="og:url" content="https://1000ch.net/posts/2013/zeptojs-1-0.html"><meta property="og:site_name" content="EagleLand"><meta property="og:title" content="Zepto.js ver1.0がリリースされた"><meta name=twitter:site content="@1000ch"><meta name=twitter:url content="https://1000ch.net/posts/2013/zeptojs-1-0.html"><meta name=twitter:title content="Zepto.js ver1.0がリリースされた"><meta name=google-site-verification content="BWewniqiBzRmrhpj51eLwug-F4hamFfyznl-ARb-Y4Y"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed sizes=114x114 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed sizes=72x72 href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-49530352-1","1000ch.net"),ga("send","pageview")</script></head><body><div class=Container><header class=Header><h1 class=Header__Title><a href=/>EagleLand</a></h1><nav class=Header__Menu><div class=Header__MenuItem><a href=/rss.xml>📻 RSS</a></div><div class=Header__MenuItem><a href="https://www.google.co.jp/search?q=site%3A1000ch.net">🔍 検索</a></div><div class=Header__MenuItem><a href=https://shogosensui.com>🌎 Who is 1000ch</a></div></nav><div class=Preference><label><input type=checkbox switch id=auto-phrase> 日本語のフレーズ改行
</label><label><input type=checkbox switch id=dark-mode> ダークモード</label></div></header><main class=Main><span class="Label Label--gray pull-left">2013.03.05</span><h1 id=zeptojs-ver10がリリースされた>Zepto.js ver1.0がリリースされた</h1><p>v1.0rcが11ヶ月間も続いていたが、ようやくRelease Candidateではなくなり正式リリースとなった。</p><ul><li><a href=http://zeptojs.com/>http://zeptojs.com/</a></li><li><a href=https://github.com/madrobby/zepto>https://github.com/madrobby/zepto</a></li></ul><h2 id=おさらい>おさらい</h2><p>おさらいすると、Zepto.jsはjQueryとAPIの互換性があるモダンブラウザ向け軽量ライブラリ。
jQueryはIE対応とか$.AnimationとかDeferredとかあるけど、その辺りを除いて実装してあるようなイメージ。現状、iOSやSafariにはIE対応とか必要ない訳で、これ使うとファイルサイズ落とせますねっていうコンセプトで作られている。</p><h2 id=ビルドについて>ビルドについて</h2><h3 id=rakeファイルがいつの間にか消えてる>rakeファイルがいつの間にか消えてる！</h3><p>Zeptoは<a href=https://github.com/madrobby/zepto#building>カスタムビルド</a>が出来るようになっていて、欲しい実装のみを選んで使える。rcの頃はrakeファイルがあった気がしたんだけど、今はmake経由でビルドするようだ。</p><h3 id=zepto-moduleshttpsgithubcommadrobbyzeptozepto-modules><a href=https://github.com/madrobby/zepto#zepto-modules>Zepto modules</a></h3><p>モジュール一覧を引用して少し解説する。★がついているのはノーマルビルドに含まれるもの。</p><ul><li>polyfill★ - iOS3.x向けのString#trimとArray#reduceの実装。要らないと思う。</li><li>zepto★ - Coreモジュール。これはないと話にならない。</li><li>event★ - <code>on()</code>とか<code>off()</code>とか、イベント周りの実装。</li><li>detect★ - UserAgentの判定の実装。必要に応じて。</li><li>fx★ - アニメーションを実現する<code>animate()</code>の実装。</li><li>fx_methods - <code>animate()</code>を使った<code>show()</code>や<code>hide()</code>などの実装。fx依存。</li><li>ajax★ - 非同期通信(XMLHttpRequest)の実装。</li><li>form★ - form要素の値からQueryStringを作ってくれたりsubmitしてくれるあたり。</li><li>assets - iOSのimgのmemory対策用モジュール。コアの<code>remove()</code>のオーバーライド。</li><li>data - ノードの<code>data-</code>へのアクセスではなくメモリベースで情報を格納する機構。コアの<code>data()</code>のオーバーライド。</li><li>selector - jQueryの拡張CSSセレクタ(<code>:first</code>とか<code>:visible</code>とか)の実装。</li><li>touch - タッチデバイスでの<code>swipe</code>や<code>tap</code>などのイベントの実装。</li><li>gesture - タッチデバイスでの<code>pinch</code>イベントの実装。</li><li>stack - <code>andSelf()</code>と<code>end()</code>の実装。</li></ul><p>polyfillは要らないケースが多いし、detectもfxも必要に応じて入れればいいので、まずは少ない構成で試してみては如何だろう。</p><h2 id=更新履歴の気になるあたり>更新履歴の気になるあたり</h2><ul><li>「 <strong>Twitter Bootstrapに対応！</strong> 」</li><li>「node.jsベースのビルドになったよ。」</li><li>「PhantomJSとTravis CIによる自動テストになった。」</li><li>「touchモジュールをデフォルトビルドから外した。」</li><li>「 <strong>バグがいっぱい直った</strong> 」.｡ﾟ+.(･∀･)ﾟ+.ﾟｲｲ!!</li><li>「Ajaxで<code>{cache: false}</code>をサポート」</li><li>「<code>each()</code>のコールバック中でfalseが返されるとループを止めるようにした。」</li></ul><p>Ajaxの<code>{cache: false}</code>は同じリクエストで結果がキャッシュされる話だと思うが、対応策としてダミーでDate.now()を付与してる。ちなみにjQueryだと長さを気にしてidをインクリメントして付与してる。やってることは同じ。<code>each()</code>中のreturn falseはjQueryの仕様に合わせたといったところだろう。</p><h2 id=所感>所感</h2><p>何はともあれrcがとれるのは嬉しい。</p><p>DOMのラッパーライブラリは他にも色々あるが、実績ある分Zeptoは比較的安心できる。再設計・軽量化を謳ったjQuery2.0もrcですがuncompressedで8000行くらいあったので、Zeptoまで軽くなることは、ひとまずなさそう。軽さの話が出たところで、改めて以下のことを提言。</p><blockquote><p>負荷をかけるべきはネットワークではなくハードウェア</p></blockquote><p>で、あるべきと。</p><p>4Gなどでネットワークも速くなってきているとは言え、環境に影響される。それに比べてハードウェアの進化は格段に早い上に安定している。ファイルサイズが減れば、自ずと端末にキャッシュされるサイズも、JavaScriptをパースする時間も、ブラウザメモリも削減できる。</p><aside class=Share><div class=Share__Item><button type=button class=Share__Button>🔗 この記事をシェアする</a></div></aside><div popover=auto id=Popover>タイトルと URL をコピーしました</div><nav class=Pager><div class="Pager__Item Pager__Item--left"><a href=/posts/2013/gruntjs-0-4.html>👈 Grunt ver0.4に向けての環境の再構築</a></div><div class="Pager__Item Pager__Item--right"><a href=/posts/2013/gruntjs-0-5-roadmap.html>Grunt ver0.5に向けてのロードマップ 👉</a></div></nav></main><aside class=Aside></aside><footer class=Footer style=margin-bottom:2%><h1>Author</h1><div class=Media><picture><source srcset=/img/1000ch.avif type=image/avif><img class=Media__Figure src=/img/1000ch.jpg alt></picture><div class=Media__Body><h3 class=Media__Title>1000ch <a href=https://twitter.com/1000ch class=twitter-follow-button data-show-count=false data-show-screen-name=false>Follow @1000ch</a></h3><p>Web アプリケーション開発を専門とするソフトウェアエンジニア。企業で働く傍ら、技術顧問として複数企業のエンジニアリングに関わり、高品質で維持しやすい Web アプリケーションを作るための活動を続けている。</p></div></div></footer></div><script defer src=https://platform.twitter.com/widgets.js></script><script defer src=https://platform.instagram.com/en_US/embeds.js></script><script defer src=https://strava-embeds.com/embed.js></script><script defer src=https://embed.bsky.app/static/embed.js></script><script type=module>
import hljs from 'https://unpkg.com/@highlightjs/cdn-assets@11.9.0/es/highlight.min.js';

document.querySelectorAll('pre code').forEach(block => {
  hljs.highlightBlock(block);
});
</script><script type=module>
import AffiliateLink from '/js/affiliate-link.js';

customElements.define('affiliate-link', AffiliateLink);

const autoPhrase = document.querySelector('#auto-phrase');
const darkMode =  document.querySelector('#dark-mode');
autoPhrase.checked = localStorage.getItem('auto-phrase');
darkMode.checked = localStorage.getItem('dark-mode');

autoPhrase.addEventListener('change', event => {
  if (event.target.checked) {
    localStorage.setItem('auto-phrase', true);
  } else {
    localStorage.removeItem('auto-phrase');
  }
});

darkMode.addEventListener('change', event => {
  if (event.target.checked) {
    localStorage.setItem('dark-mode', true);
  } else {
    localStorage.removeItem('dark-mode');
  }
});

document.querySelector('.Share__Item button').addEventListener('click', async event => {
  event.preventDefault();

  const data = {
    title: document.title,
    text: document.title,
    url: location.href
  };

  if (navigator.canShare?.(data)) {
    await navigator.share(data);
  } else {
    await navigator.clipboard?.writeText(`${data.title} ${data.url}`);
    const popover = document.querySelector('#Popover');
    popover.showPopover();

    setTimeout(() => {
      popover.hidePopover();
    }, 2000);
  }
});
</script></body></html>